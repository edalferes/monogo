{"config":{"lang":["pt","en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Monetics","text":"<p>Bem-vindo \u00e0 documenta\u00e7\u00e3o do Monetics - uma API RESTful completa para gest\u00e3o financeira pessoal.</p>"},{"location":"#visao-geral","title":"\ud83c\udfaf Vis\u00e3o Geral","text":"<p>O Monetics oferece um sistema robusto para controle de finan\u00e7as pessoais, permitindo aos usu\u00e1rios gerenciar suas contas, categorizar gastos, registrar transa\u00e7\u00f5es e planejar or\u00e7amentos.</p>"},{"location":"#principais-funcionalidades","title":"\ud83d\ude80 Principais Funcionalidades","text":""},{"location":"#gestao-de-contas","title":"Gest\u00e3o de Contas","text":"<p>Crie e gerencie m\u00faltiplas contas banc\u00e1rias com acompanhamento de saldo em tempo real.</p>"},{"location":"#categorizacao-inteligente","title":"Categoriza\u00e7\u00e3o Inteligente","text":"<p>Organize suas receitas e despesas em categorias personalizadas para melhor visualiza\u00e7\u00e3o dos gastos.</p>"},{"location":"#transacoes-completas","title":"Transa\u00e7\u00f5es Completas","text":"<p>Registre receitas, despesas e transfer\u00eancias entre contas com status e rastreamento detalhado.</p>"},{"location":"#orcamentos-planejados","title":"Or\u00e7amentos Planejados","text":"<p>Defina limites de gastos por categoria e per\u00edodo (mensal, trimestral, anual) com alertas configur\u00e1veis.</p>"},{"location":"#relatorios-detalhados","title":"Relat\u00f3rios Detalhados","text":"<p>Visualize seus gastos mensais, acompanhe or\u00e7amentos e analise seu comportamento financeiro.</p>"},{"location":"#autenticacao-robusta","title":"Autentica\u00e7\u00e3o Robusta","text":"<p>Sistema completo de autentica\u00e7\u00e3o e autoriza\u00e7\u00e3o com JWT, roles e permissions granulares.</p>"},{"location":"#arquitetura","title":"\ud83c\udfd7\ufe0f Arquitetura","text":"<p>O projeto segue princ\u00edpios de Clean Architecture com separa\u00e7\u00e3o clara de responsabilidades:</p> <ul> <li>Domain: Entidades de neg\u00f3cio puras</li> <li>Use Cases: L\u00f3gica de aplica\u00e7\u00e3o</li> <li>Adapters: HTTP handlers e repositories</li> <li>Infrastructure: Banco de dados, validadores, logger</li> </ul>"},{"location":"#comecando","title":"\ud83d\udcda Come\u00e7ando","text":"<p>Para come\u00e7ar a usar o Monetics, consulte nosso Guia de Instala\u00e7\u00e3o.</p>"},{"location":"#links-uteis","title":"\ud83d\udd17 Links \u00dateis","text":"<ul> <li>Reposit\u00f3rio GitHub</li> <li>Swagger Documentation</li> <li>API Reference</li> </ul>"},{"location":"#contribuindo","title":"\ud83e\udd1d Contribuindo","text":"<p>Contribui\u00e7\u00f5es s\u00e3o bem-vindas! Consulte nosso Guia de Desenvolvimento para mais informa\u00e7\u00f5es.</p>"},{"location":"MKDOCS/","title":"MkDocs Documentation","text":"<p>Este projeto usa MkDocs com o tema Material para documenta\u00e7\u00e3o.</p>"},{"location":"MKDOCS/#documentacao-disponivel","title":"\ud83d\udcda Documenta\u00e7\u00e3o Dispon\u00edvel","text":"<ul> <li>Module Dependencies - Sistema de inje\u00e7\u00e3o de depend\u00eancias</li> <li>Testing Dependencies - Guia de testes de depend\u00eancias</li> <li>Dependency Graph - Visualiza\u00e7\u00e3o do grafo de depend\u00eancias</li> <li>Communication Patterns - Padr\u00f5es de comunica\u00e7\u00e3o (Local vs HTTP)</li> <li>Health Checks API - Endpoints de health check para Kubernetes</li> </ul>"},{"location":"MKDOCS/#visualizar-documentacao-localmente","title":"\ud83d\ude80 Visualizar Documenta\u00e7\u00e3o Localmente","text":""},{"location":"MKDOCS/#pre-requisitos","title":"Pr\u00e9-requisitos","text":"<pre><code># Instalar MkDocs e depend\u00eancias\npip install mkdocs mkdocs-material pymdown-extensions\n</code></pre>"},{"location":"MKDOCS/#servir-localmente","title":"Servir Localmente","text":"<pre><code># Op\u00e7\u00e3o 1: Usar script\n./scripts/docs-serve.sh\n\n# Op\u00e7\u00e3o 2: Comando direto\nmkdocs serve\n</code></pre> <p>Acesse: http://127.0.0.1:8000</p>"},{"location":"MKDOCS/#build-estatico","title":"Build Est\u00e1tico","text":"<pre><code># Gerar site est\u00e1tico em ./site\nmkdocs build\n\n# Visualizar site gerado\nopen site/index.html\n</code></pre>"},{"location":"MKDOCS/#estrutura-da-documentacao","title":"\ud83d\udcd6 Estrutura da Documenta\u00e7\u00e3o","text":"<pre><code>docs/\n\u251c\u2500\u2500 index.md                           # Home page\n\u251c\u2500\u2500 module-dependencies.md             # \u2705 Novo - Sistema de DI\n\u251c\u2500\u2500 testing-dependencies.md            # \u2705 Novo - Testes\n\u251c\u2500\u2500 dependency-graph.md                # \u2705 Novo - Grafo visual\n\u251c\u2500\u2500 getting-started/\n\u2502   \u251c\u2500\u2500 installation.md\n\u2502   \u251c\u2500\u2500 quickstart.md\n\u2502   \u2514\u2500\u2500 configuration.md\n\u251c\u2500\u2500 architecture/\n\u2502   \u251c\u2500\u2500 overview.md\n\u2502   \u251c\u2500\u2500 modules.md\n\u2502   \u251c\u2500\u2500 database.md\n\u2502   \u2514\u2500\u2500 communication.md               # \u2705 Novo - Padr\u00f5es de comunica\u00e7\u00e3o\n\u251c\u2500\u2500 modules/\n\u2502   \u251c\u2500\u2500 auth.md\n\u2502   \u2514\u2500\u2500 budget.md\n\u251c\u2500\u2500 api/\n\u2502   \u251c\u2500\u2500 auth.md\n\u2502   \u251c\u2500\u2500 accounts.md\n\u2502   \u2514\u2500\u2500 health.md                      # \u2705 Novo - Health checks\n\u2514\u2500\u2500 guides/\n    \u251c\u2500\u2500 development.md\n    \u251c\u2500\u2500 testing.md\n    \u2514\u2500\u2500 deployment.md\n</code></pre>"},{"location":"MKDOCS/#features-do-tema-material","title":"\ud83c\udfa8 Features do Tema Material","text":"<ul> <li>\u2705 Dark Mode: Altern\u00e2ncia entre modo claro/escuro</li> <li>\u2705 Search: Busca instant\u00e2nea na documenta\u00e7\u00e3o</li> <li>\u2705 Code Highlighting: Syntax highlight para m\u00faltiplas linguagens</li> <li>\u2705 Navigation Tabs: Navega\u00e7\u00e3o organizada em tabs</li> <li>\u2705 Mermaid Diagrams: Suporte a diagramas Mermaid</li> <li>\u2705 Admonitions: Blocos de aviso, nota, dica, etc</li> <li>\u2705 Mobile Responsive: Interface adapt\u00e1vel para mobile</li> </ul>"},{"location":"MKDOCS/#adicionando-nova-documentacao","title":"\ud83d\udcdd Adicionando Nova Documenta\u00e7\u00e3o","text":""},{"location":"MKDOCS/#1-criar-arquivo-markdown","title":"1. Criar arquivo Markdown","text":"<pre><code># Criar nova p\u00e1gina\ntouch docs/new-page.md\n</code></pre>"},{"location":"MKDOCS/#2-adicionar-ao-mkdocsyml","title":"2. Adicionar ao mkdocs.yml","text":"<pre><code>nav:\n  - Home: index.md\n  - Your Section:\n      - New Page: new-page.md\n</code></pre>"},{"location":"MKDOCS/#3-visualizar-mudancas","title":"3. Visualizar mudan\u00e7as","text":"<pre><code>mkdocs serve\n# MkDocs recarrega automaticamente ao salvar arquivos\n</code></pre>"},{"location":"MKDOCS/#deploy","title":"\ud83d\udea2 Deploy","text":""},{"location":"MKDOCS/#github-pages","title":"GitHub Pages","text":"<pre><code># Deploy para GitHub Pages (branch gh-pages)\nmkdocs gh-deploy\n</code></pre>"},{"location":"MKDOCS/#docker","title":"Docker","text":"<pre><code># Build container com docs\ndocker build -t monetics-docs -f Dockerfile.docs .\n\n# Run\ndocker run -p 8000:8000 monetics-docs\n</code></pre>"},{"location":"MKDOCS/#netlify-vercel","title":"Netlify / Vercel","text":"<pre><code># Build command\nmkdocs build\n\n# Publish directory\nsite/\n</code></pre>"},{"location":"MKDOCS/#links-uteis","title":"\ud83d\udd17 Links \u00dateis","text":"<ul> <li>MkDocs Documentation</li> <li>Material for MkDocs</li> <li>Markdown Guide</li> <li>Mermaid Diagrams</li> </ul>"},{"location":"MKDOCS/#exemplos-de-uso","title":"\ud83d\udcca Exemplos de Uso","text":""},{"location":"MKDOCS/#admonitions","title":"Admonitions","text":"<pre><code>!!! note \"Nota\"\n    Este \u00e9 um bloco de nota\n\n!!! warning \"Aten\u00e7\u00e3o\"\n    Este \u00e9 um aviso importante\n\n!!! tip \"Dica\"\n    Esta \u00e9 uma dica \u00fatil\n</code></pre>"},{"location":"MKDOCS/#code-blocks","title":"Code Blocks","text":"<pre><code>\u200b```go\nfunc main() {\n    fmt.Println(\"Hello, World!\")\n}\n\u200b```\n</code></pre>"},{"location":"MKDOCS/#mermaid-diagrams","title":"Mermaid Diagrams","text":"<pre><code>\u200b```mermaid\ngraph TD\n    A[Start] --&gt; B[Process]\n    B --&gt; C[End]\n\u200b```\n</code></pre>"},{"location":"MKDOCS/#tabs","title":"Tabs","text":"<pre><code>=== \"Go\"\n    \u200b```go\n    fmt.Println(\"Hello\")\n    \u200b```\n\n=== \"Python\"\n    \u200b```python\n    print(\"Hello\")\n    \u200b```\n</code></pre>"},{"location":"MKDOCS/#troubleshooting","title":"\ud83d\udc1b Troubleshooting","text":""},{"location":"MKDOCS/#mkdocs-command-not-found","title":"\"mkdocs: command not found\"","text":"<pre><code># Instalar MkDocs\npip install mkdocs mkdocs-material\n</code></pre>"},{"location":"MKDOCS/#warnings-sobre-links-quebrados","title":"Warnings sobre links quebrados","text":"<p>Verifique se os arquivos referenciados no <code>mkdocs.yml</code> existem em <code>docs/</code>.</p>"},{"location":"MKDOCS/#site-nao-atualiza-automaticamente","title":"Site n\u00e3o atualiza automaticamente","text":"<pre><code># Reiniciar servidor MkDocs\nCtrl+C\nmkdocs serve\n</code></pre>"},{"location":"dependency-graph/","title":"Grafo de Depend\u00eancias entre M\u00f3dulos","text":"<p>Este documento visualiza as rela\u00e7\u00f5es de depend\u00eancia entre os m\u00f3dulos do Monetics.</p>"},{"location":"dependency-graph/#grafo-atual-de-dependencias","title":"Grafo Atual de Depend\u00eancias","text":"<pre><code>graph TD\n    A[M\u00f3dulo Auth] --&gt;|local ou HTTP| B[M\u00f3dulo Budget]\n\n    style A fill:#4CAF50,stroke:#333,stroke-width:2px,color:#fff\n    style B fill:#2196F3,stroke:#333,stroke-width:2px,color:#fff</code></pre> <p>Legenda: - \ud83d\udfe2 Verde: M\u00f3dulos independentes (sem depend\u00eancias) - \ud83d\udd35 Azul: M\u00f3dulos dependentes</p>"},{"location":"dependency-graph/#dependencias-detalhadas","title":"Depend\u00eancias Detalhadas","text":""},{"location":"dependency-graph/#modulo-auth","title":"M\u00f3dulo Auth","text":"<ul> <li>Nome: <code>auth</code></li> <li>Depend\u00eancias: Nenhuma</li> <li>Fornece: UserService, AuthService, valida\u00e7\u00e3o JWT</li> <li>Status: \u2705 M\u00f3dulo independente</li> </ul>"},{"location":"dependency-graph/#modulo-budget","title":"M\u00f3dulo Budget","text":"<ul> <li>Nome: <code>budget</code></li> <li>Depend\u00eancias: <code>auth</code> (obrigat\u00f3ria)</li> <li>Consome: UserService do Auth</li> <li>Status: \u2705 M\u00f3dulo dependente</li> </ul>"},{"location":"dependency-graph/#fluxo-de-inicializacao","title":"Fluxo de Inicializa\u00e7\u00e3o","text":""},{"location":"dependency-graph/#modo-monolito-moduleall","title":"Modo Mon\u00f3lito (<code>--module=all</code>)","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Inicializa\u00e7\u00e3o da Aplica\u00e7\u00e3o             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                  \u2502\n                  \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  ModuleRegistry.Initialize()            \u2502\n\u2502  \u251c\u2500 Analisar m\u00f3dulos habilitados         \u2502\n\u2502  \u2514\u2500 Resolver ordem de depend\u00eancias      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                  \u2502\n                  \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Passo 1: Inicializar Auth              \u2502\n\u2502  \u251c\u2500 Sem depend\u00eancias, pode iniciar      \u2502\n\u2502  \u251c\u2500 WireUp(group, db, jwtSecret, log)   \u2502\n\u2502  \u251c\u2500 Registrar UserService no container  \u2502\n\u2502  \u2514\u2500 Status: \u2705 Pronto                    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                  \u2502\n                  \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Passo 2: Inicializar Budget            \u2502\n\u2502  \u251c\u2500 Depend\u00eancias: [auth]                \u2502\n\u2502  \u251c\u2500 Verificar: auth inicializado? \u2705 SIM \u2502\n\u2502  \u251c\u2500 Recuperar UserService do container  \u2502\n\u2502  \u251c\u2500 WireUp(group, db, userService, log) \u2502\n\u2502  \u2514\u2500 Status: \u2705 Pronto                    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                  \u2502\n                  \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Aplica\u00e7\u00e3o Pronta                       \u2502\n\u2502  \u2514\u2500 Todos os m\u00f3dulos inicializados      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"dependency-graph/#modo-microservicos","title":"Modo Microservi\u00e7os","text":"<p>Cen\u00e1rio: Auth e Budget como servi\u00e7os separados</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Servi\u00e7o Auth            \u2502     \u2502   Servi\u00e7o Budget          \u2502\n\u2502   (Porta 8081)            \u2502     \u2502   (Porta 8082)            \u2502\n\u2502                           \u2502     \u2502                           \u2502\n\u2502  ./bin/monetics           \u2502     \u2502  ./bin/monetics           \u2502\n\u2502    --module=auth          \u2502     \u2502    --module=budget        \u2502\n\u2502                           \u2502     \u2502                           \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502     \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502 M\u00f3dulo Auth         \u2502  \u2502     \u2502  \u2502 M\u00f3dulo Budget       \u2502  \u2502\n\u2502  \u2502 - UserService       \u2502  \u2502\u25c4\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u253c\u2500 Cliente HTTP       \u2502  \u2502\n\u2502  \u2502 - Valida\u00e7\u00e3o JWT     \u2502  \u2502     \u2502  \u2502 - L\u00f3gica de Retry   \u2502  \u2502\n\u2502  \u2502                     \u2502  \u2502     \u2502  \u2502 - Circuit Breaker   \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502     \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2502                           \u2502     \u2502                           \u2502\n\u2502  Endpoints:               \u2502     \u2502  Endpoints:               \u2502\n\u2502  - POST /v1/auth/register \u2502     \u2502  - GET /v1/budget/accounts\u2502\n\u2502  - POST /v1/auth/login    \u2502     \u2502  - POST /v1/budget/...    \u2502\n\u2502  - GET /v1/auth/users     \u2502     \u2502                           \u2502\n\u2502                           \u2502     \u2502  Config:                  \u2502\n\u2502                           \u2502     \u2502  AUTH_SERVICE_URL=        \u2502\n\u2502                           \u2502     \u2502    http://localhost:8081  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Fluxo de Comunica\u00e7\u00e3o:</p> <ol> <li>Requisi\u00e7\u00e3o chega ao servi\u00e7o Budget</li> <li>Budget precisa validar usu\u00e1rio (do Auth)</li> <li>Budget verifica: Auth est\u00e1 local? \u274c N\u00c3O</li> <li>Budget l\u00ea <code>AUTH_SERVICE_URL</code> da configura\u00e7\u00e3o</li> <li>Budget usa cliente HTTP com retry + circuit breaker</li> <li>Cliente HTTP faz requisi\u00e7\u00e3o ao servi\u00e7o Auth (porta 8081)</li> <li>Servi\u00e7o Auth responde com dados do usu\u00e1rio</li> <li>Budget continua o processamento</li> </ol>"},{"location":"dependency-graph/#grafos-de-dependencia-futuros","title":"Grafos de Depend\u00eancia Futuros","text":""},{"location":"dependency-graph/#exemplo-adicionando-modulo-notifications","title":"Exemplo: Adicionando M\u00f3dulo Notifications","text":"<pre><code>graph TD\n    A[M\u00f3dulo Auth] --&gt;|local ou HTTP| B[M\u00f3dulo Budget]\n    A --&gt;|local ou HTTP| C[M\u00f3dulo Notifications]\n    B --&gt;|local ou HTTP| C\n\n    style A fill:#4CAF50,stroke:#333,stroke-width:2px,color:#fff\n    style B fill:#2196F3,stroke:#333,stroke-width:2px,color:#fff\n    style C fill:#FF9800,stroke:#333,stroke-width:2px,color:#fff</code></pre> <p>Depend\u00eancias:</p> <ul> <li>Auth: Nenhuma</li> <li>Budget: <code>[auth]</code></li> <li>Notifications: <code>[auth, budget]</code></li> </ul> <p>Ordem de Inicializa\u00e7\u00e3o:</p> <ol> <li>Auth (sem depend\u00eancias)</li> <li>Budget (depende de Auth)</li> <li>Notifications (depende de Auth e Budget)</li> </ol>"},{"location":"dependency-graph/#documentacao-relacionada","title":"Documenta\u00e7\u00e3o Relacionada","text":"<ul> <li>Depend\u00eancias entre M\u00f3dulos</li> <li>Testando Depend\u00eancias</li> <li>Padr\u00f5es de Comunica\u00e7\u00e3o</li> </ul>"},{"location":"http-architecture/","title":"Arquitetura HTTP - Inspirada no Grafana Loki","text":""},{"location":"http-architecture/#visao-geral","title":"Vis\u00e3o Geral","text":"<p>O Monetics implementa uma arquitetura modular inspirada no Grafana Loki, permitindo que os m\u00f3dulos sejam executados de forma independente ou como parte de um mon\u00f3lito, com comunica\u00e7\u00e3o HTTP entre servi\u00e7os.</p>"},{"location":"http-architecture/#modulos-e-servicos","title":"M\u00f3dulos e Servi\u00e7os","text":""},{"location":"http-architecture/#modulos-disponiveis","title":"M\u00f3dulos Dispon\u00edveis","text":"<ul> <li>auth: Autentica\u00e7\u00e3o, autoriza\u00e7\u00e3o, usu\u00e1rios, roles e permissions</li> <li>budget: Contas, categorias, transa\u00e7\u00f5es, or\u00e7amentos e relat\u00f3rios</li> </ul>"},{"location":"http-architecture/#modos-de-execucao","title":"Modos de Execu\u00e7\u00e3o","text":"<pre><code># Mon\u00f3lito - todos os m\u00f3dulos\n./bin/monetics --module=all\n\n# Microservice - apenas auth\n./bin/monetics --module=auth\n\n# Microservice - apenas budget\n./bin/monetics --module=budget\n\n# M\u00faltiplos m\u00f3dulos\n./bin/monetics --module=auth,budget\n</code></pre>"},{"location":"http-architecture/#comunicacao-http","title":"Comunica\u00e7\u00e3o HTTP","text":""},{"location":"http-architecture/#configuracao","title":"Configura\u00e7\u00e3o","text":"<p>A comunica\u00e7\u00e3o entre m\u00f3dulos \u00e9 controlada via <code>config.yaml</code>:</p> <pre><code>modules:\n  auth:\n    url: \"\"  # Local (mon\u00f3lito)\n    # url: \"http://localhost:8081\"  # HTTP remoto\n</code></pre>"},{"location":"http-architecture/#client-http-pkghttpclient","title":"Client HTTP (<code>pkg/httpclient</code>)","text":"<p>Cliente HTTP reutiliz\u00e1vel com recursos avan\u00e7ados de resili\u00eancia:</p> <ul> <li>Connection pooling: 100 conex\u00f5es idle por padr\u00e3o</li> <li>Timeouts: 10s por requisi\u00e7\u00e3o (configur\u00e1vel)</li> <li>Idle timeout: 90s para conex\u00f5es idle</li> <li>Retry logic: Retry autom\u00e1tico com backoff exponencial</li> <li>3 tentativas por padr\u00e3o</li> <li>Backoff inicial: 100ms</li> <li>Backoff m\u00e1ximo: 5s</li> <li>Multiplicador: 2.0</li> <li>Jitter aleat\u00f3rio (0-25%) para evitar thundering herd</li> <li>Circuit breaker: Prote\u00e7\u00e3o contra cascata de falhas</li> <li>Estados: Closed \u2192 Open \u2192 Half-Open</li> <li>5 falhas consecutivas abrem o circuito</li> <li>30s timeout antes de tentar Half-Open</li> <li>3 requisi\u00e7\u00f5es de teste no estado Half-Open</li> </ul>"},{"location":"http-architecture/#uso-do-client","title":"Uso do Client","text":"<pre><code>import \"github.com/edalferes/monetics/pkg/httpclient\"\n\n// Criar client\ncfg := httpclient.DefaultConfig(\"http://auth-service:8080\")\nclient := httpclient.NewClient(cfg)\n\n// GET request\nresp, err := client.Get(ctx, \"/v1/auth/users/1\")\nif err != nil {\n    return err\n}\n\n// POST request\nbody := map[string]interface{}{\"name\": \"John\"}\nresp, err := client.Post(ctx, \"/v1/auth/users\", body)\n\n// PUT request\nresp, err := client.Put(ctx, \"/v1/auth/users/1\", body)\n\n// DELETE request\nresp, err := client.Delete(ctx, \"/v1/auth/users/1\")\n</code></pre>"},{"location":"http-architecture/#userservicehttp","title":"UserServiceHTTP","text":"<p>Exemplo de implementa\u00e7\u00e3o HTTP para comunica\u00e7\u00e3o entre m\u00f3dulos:</p> <pre><code>// internal/modules/auth/service/user_service_http.go\ntype UserServiceHTTP struct {\n    client *httpclient.Client\n}\n\nfunc NewUserServiceHTTP(baseURL string) contracts.UserService {\n    cfg := httpclient.DefaultConfig(baseURL)\n    return &amp;UserServiceHTTP{\n        client: httpclient.NewClient(cfg),\n    }\n}\n\nfunc (s *UserServiceHTTP) GetUserByID(ctx context.Context, userID uint) (*contracts.UserInfo, error) {\n    path := fmt.Sprintf(\"/v1/auth/users/%d\", userID)\n    resp, err := s.client.Get(ctx, path)\n    if err != nil {\n        return nil, err\n    }\n\n    var userInfo contracts.UserInfo\n    json.Unmarshal(resp.Data, &amp;userInfo)\n    return &amp;userInfo, nil\n}\n</code></pre>"},{"location":"http-architecture/#health-checks","title":"Health Checks","text":"<p>Endpoints inspirados no Loki para Kubernetes:</p>"},{"location":"http-architecture/#health","title":"<code>/health</code>","text":"<p>Retorna status geral do servi\u00e7o e m\u00f3dulos ativos:</p> <pre><code>{\n  \"status\": \"healthy\",\n  \"service\": \"monetics\",\n  \"modules\": [\"auth\", \"budget\"],\n  \"details\": {\n    \"database\": \"connected\"\n  }\n}\n</code></pre>"},{"location":"http-architecture/#ready","title":"<code>/ready</code>","text":"<p>Readiness probe - verifica se o servi\u00e7o est\u00e1 pronto para receber tr\u00e1fego:</p> <pre><code>{\n  \"status\": \"ready\"\n}\n</code></pre> <p>Retorna 503 se: - Banco de dados n\u00e3o estiver conectado - Ping do banco falhar</p>"},{"location":"http-architecture/#live","title":"<code>/live</code>","text":"<p>Liveness probe - verifica se o processo est\u00e1 vivo:</p> <pre><code>{\n  \"status\": \"alive\"\n}\n</code></pre>"},{"location":"http-architecture/#uso-no-kubernetes","title":"Uso no Kubernetes","text":"<pre><code>apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: monetics-auth\nspec:\n  template:\n    spec:\n      containers:\n      - name: auth\n        image: monetics:latest\n        args: [\"--module=auth\"]\n        ports:\n        - containerPort: 8080\n        livenessProbe:\n          httpGet:\n            path: /live\n            port: 8080\n          initialDelaySeconds: 10\n          periodSeconds: 30\n        readinessProbe:\n          httpGet:\n            path: /ready\n            port: 8080\n          initialDelaySeconds: 5\n          periodSeconds: 10\n</code></pre>"},{"location":"http-architecture/#deployment-patterns","title":"Deployment Patterns","text":""},{"location":"http-architecture/#monolito-desenvolvimento","title":"Mon\u00f3lito (Desenvolvimento)","text":"<pre><code># docker-compose.yml\nservices:\n  monetics:\n    build: .\n    command: [\"--module=all\"]\n    ports:\n      - \"8080:8080\"\n    environment:\n      - DATABASE_URL=postgres://...\n</code></pre>"},{"location":"http-architecture/#microservices-producao","title":"Microservices (Produ\u00e7\u00e3o)","text":"<pre><code># docker-compose.yml\nservices:\n  auth:\n    build: .\n    command: [\"--module=auth\"]\n    ports:\n      - \"8081:8080\"\n\n  budget:\n    build: .\n    command: [\"--module=budget\"]\n    ports:\n      - \"8082:8080\"\n    environment:\n      - AUTH_SERVICE_URL=http://auth:8080\n</code></pre>"},{"location":"http-architecture/#kubernetes","title":"Kubernetes","text":"<pre><code># auth-deployment.yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: auth\nspec:\n  replicas: 3\n  template:\n    spec:\n      containers:\n      - name: auth\n        image: monetics:latest\n        args: [\"--module=auth\"]\n\n---\n# budget-deployment.yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: budget\nspec:\n  replicas: 3\n  template:\n    spec:\n      containers:\n      - name: budget\n        image: monetics:latest\n        args: [\"--module=budget\"]\n        env:\n        - name: AUTH_SERVICE_URL\n          value: \"http://auth-service:8080\"\n</code></pre>"},{"location":"http-architecture/#comparacao-com-loki","title":"Compara\u00e7\u00e3o com Loki","text":"Aspecto Loki Monetics Module Selection <code>-target=all,distributor,ingester</code> <code>--module=all,auth,budget</code> Communication gRPC + HTTP HTTP (com plano para gRPC) Health Checks <code>/ready</code>, <code>/health</code> <code>/ready</code>, <code>/health</code>, <code>/live</code> Service Discovery Ring (Memberlist/Consul) Config-based URLs Deployment Kubernetes, Docker Docker, Kubernetes"},{"location":"http-architecture/#proximos-passos","title":"Pr\u00f3ximos Passos","text":""},{"location":"http-architecture/#implementado","title":"Implementado","text":"<ol> <li>\u2705 Retry Logic: Retry autom\u00e1tico com backoff exponencial e jitter</li> <li>\u2705 Circuit Breaker: Prote\u00e7\u00e3o contra cascata de falhas com estados (Closed, Open, Half-Open)</li> <li>\u2705 Connection Pooling: Gerenciamento otimizado de conex\u00f5es HTTP</li> <li>\u2705 Health Checks: Endpoints <code>/health</code>, <code>/ready</code>, <code>/live</code> para Kubernetes</li> </ol>"},{"location":"http-architecture/#planejado","title":"Planejado","text":"<ol> <li>gRPC Support: Adicionar gRPC para performance em comunica\u00e7\u00e3o entre servi\u00e7os</li> <li>Distributed Tracing: OpenTelemetry para rastreamento distribu\u00eddo</li> <li>Service Mesh: Integra\u00e7\u00e3o com Istio/Linkerd</li> <li>Rate Limiting: Prote\u00e7\u00e3o contra sobrecarga de requisi\u00e7\u00f5es</li> </ol>"},{"location":"http-architecture/#quando-usar-grpc-vs-http","title":"Quando usar gRPC vs HTTP","text":"<p>Use HTTP quando: - Desenvolvimento local - Debugging e troubleshooting - Integra\u00e7\u00f5es externas - APIs p\u00fablicas</p> <p>Use gRPC quando: - Alta performance necess\u00e1ria - Volume alto de chamadas - Necessidade de streaming - Comunica\u00e7\u00e3o interna entre servi\u00e7os</p>"},{"location":"http-architecture/#referencias","title":"Refer\u00eancias","text":"<ul> <li>Grafana Loki Architecture</li> <li>Kubernetes Health Checks</li> <li>Go HTTP Client Best Practices</li> </ul>"},{"location":"module-dependencies/","title":"Gerenciamento de Depend\u00eancias entre M\u00f3dulos","text":""},{"location":"module-dependencies/#visao-geral","title":"Vis\u00e3o Geral","text":"<p>O projeto Monetics usa um sistema de Container de Inje\u00e7\u00e3o de Depend\u00eancias e Registro de M\u00f3dulos para gerenciar depend\u00eancias entre m\u00f3dulos. Isso garante que os m\u00f3dulos sejam inicializados na ordem correta e possam se comunicar localmente (em mem\u00f3ria) ou remotamente (via HTTP).</p>"},{"location":"module-dependencies/#arquitetura","title":"Arquitetura","text":""},{"location":"module-dependencies/#componentes","title":"Componentes","text":"<ol> <li>ModuleContainer (<code>container.go</code>)</li> <li>Gerencia registro e recupera\u00e7\u00e3o de servi\u00e7os</li> <li>Armazena configura\u00e7\u00e3o do m\u00f3dulo, banco de dados, logger, etc.</li> <li> <p>Registro de servi\u00e7os thread-safe</p> </li> <li> <p>ModuleRegistry (<code>registry.go</code>)</p> </li> <li>Gerencia registro de m\u00f3dulos com depend\u00eancias</li> <li>Resolve ordem de depend\u00eancias automaticamente</li> <li>Inicializa m\u00f3dulos na sequ\u00eancia correta</li> </ol>"},{"location":"module-dependencies/#grafo-atual-de-dependencias-dos-modulos","title":"Grafo Atual de Depend\u00eancias dos M\u00f3dulos","text":"<pre><code>auth (sem depend\u00eancias)\n  \u2193\nbudget (depende de auth)\n\ntest (sem depend\u00eancias)\n</code></pre>"},{"location":"module-dependencies/#como-funciona","title":"Como Funciona","text":""},{"location":"module-dependencies/#modo-monolito-moduleall","title":"Modo Mon\u00f3lito (<code>--module=all</code>)","text":"<p>Quando todos os m\u00f3dulos rodam juntos:</p> <ol> <li>M\u00f3dulo Auth inicializa primeiro</li> <li>UserService do Auth \u00e9 registrado no container</li> <li>M\u00f3dulo Budget inicializa e usa o UserService local</li> <li>Comunica\u00e7\u00e3o: Em mem\u00f3ria (sem HTTP)</li> </ol>"},{"location":"module-dependencies/#modo-microservicos","title":"Modo Microservi\u00e7os","text":""},{"location":"module-dependencies/#servico-auth-moduleauth","title":"Servi\u00e7o Auth (<code>--module=auth</code>)","text":"<pre><code>./bin/monetics --module=auth\n# Roda na porta 8080 (ou porta configurada)\n</code></pre>"},{"location":"module-dependencies/#servico-budget-modulebudget","title":"Servi\u00e7o Budget (<code>--module=budget</code>)","text":"<pre><code>export AUTH_SERVICE_URL=http://localhost:8080\n./bin/monetics --module=budget\n# Usa HTTP para comunicar com o servi\u00e7o Auth\n</code></pre>"},{"location":"module-dependencies/#adicionando-novos-modulos","title":"Adicionando Novos M\u00f3dulos","text":""},{"location":"module-dependencies/#exemplo-adicionando-um-modulo-notificacoes","title":"Exemplo: Adicionando um M\u00f3dulo \"Notifica\u00e7\u00f5es\"","text":"<p>Digamos que voc\u00ea queira adicionar um m\u00f3dulo de notifica\u00e7\u00f5es que depende tanto de Auth quanto de Budget.</p>"},{"location":"module-dependencies/#passo-1-criar-estrutura-do-modulo","title":"Passo 1: Criar Estrutura do M\u00f3dulo","text":"<pre><code>internal/modules/notifications/\n\u251c\u2500\u2500 module.go\n\u251c\u2500\u2500 entities.go\n\u251c\u2500\u2500 seed.go\n\u251c\u2500\u2500 domain/\n\u251c\u2500\u2500 usecase/\n\u251c\u2500\u2500 adapters/\n\u2502   \u251c\u2500\u2500 http/\n\u2502   \u2514\u2500\u2500 repository/\n</code></pre>"},{"location":"module-dependencies/#passo-2-implementar-funcoes-do-modulo","title":"Passo 2: Implementar Fun\u00e7\u00f5es do M\u00f3dulo","text":"<pre><code>// internal/modules/notifications/module.go\npackage notifications\n\nimport (\n\"github.com/edalferes/monetics/pkg/logger\"\n\"github.com/labstack/echo/v4\"\n\"gorm.io/gorm\"\n)\n\n// WireUp inicializa o m\u00f3dulo de notifica\u00e7\u00f5es com servi\u00e7os locais\nfunc WireUp(group *echo.Group, db *gorm.DB, jwtSecret string, log logger.Logger) {\n    // Inicializar com depend\u00eancias locais\n}\n\n// WireUpWithHTTP inicializa o m\u00f3dulo de notifica\u00e7\u00f5es com servi\u00e7os HTTP\nfunc WireUpWithHTTP(group *echo.Group, db *gorm.DB, jwtSecret string, log logger.Logger, \nauthURL string, budgetURL string) {\n    // Inicializar com depend\u00eancias via cliente HTTP\n}\n\n// Entities retorna as entidades do banco de dados\nfunc Entities() []interface{} {\n    return []interface{}{\n        // Suas entidades aqui\n    }\n}\n\n// Seed popula dados iniciais\nfunc Seed(db *gorm.DB) error {\n    return nil\n}\n</code></pre>"},{"location":"module-dependencies/#passo-3-registrar-no-module-registry","title":"Passo 3: Registrar no Module Registry","text":"<p>Editar <code>internal/applications/api/registry.go</code>:</p> <pre><code>func (r *ModuleRegistry) RegisterBuiltInModules() {\n    // ... registro existente de auth e budget ...\n\n    // M\u00f3dulo Notifications - depende de Auth e Budget\n    r.Register(\"notifications\", []string{\"auth\", \"budget\"}, func(c *ModuleContainer) error {\ncfg := c.GetConfig()\n        db := c.GetDB()\n        log := c.GetLogger()\n        group := c.GetEchoGroup()\n\n        authLocal := c.IsModuleEnabled(\"auth\")\n        budgetLocal := c.IsModuleEnabled(\"budget\")\n\n        if authLocal &amp;&amp; budgetLocal {\n            // Ambos os servi\u00e7os locais\n            log.Info().Msg(\"Usando servi\u00e7os locais para m\u00f3dulo Notifications\")\n            notifications.WireUp(group, db, cfg.JWT.Secret, log)\n        } else {\n            // Usar HTTP para servi\u00e7os remotos\n            authURL := cfg.Modules.Auth.URL\n            budgetURL := cfg.Modules.Budget.URL\n\n            log.Info().\n                Str(\"auth_url\", authURL).\n                Str(\"budget_url\", budgetURL).\n                Msg(\"Usando servi\u00e7os remotos para m\u00f3dulo Notifications\")\n\n            notifications.WireUpWithHTTP(group, db, cfg.JWT.Secret, log, authURL, budgetURL)\n        }\n\n        return nil\n    })\n}\n</code></pre>"},{"location":"module-dependencies/#passo-4-adicionar-ao-parsemodules","title":"Passo 4: Adicionar ao parseModules","text":"<p>Editar <code>internal/applications/api/app.go</code>:</p> <pre><code>func parseModules(input string) []string {\n    if input == \"\" || input == \"all\" {\n        return []string{\"auth\", \"budget\", \"notifications\"}  // Adicionar novo m\u00f3dulo\n    }\n    // ... resto da fun\u00e7\u00e3o\n}\n</code></pre>"},{"location":"module-dependencies/#passo-5-adicionar-configuracao","title":"Passo 5: Adicionar Configura\u00e7\u00e3o","text":"<p>Editar <code>config.yaml</code>:</p> <pre><code>modules:\n  auth:\n    url: \"${AUTH_SERVICE_URL:}\"\n  budget:\n    url: \"${BUDGET_SERVICE_URL:}\"\n  notifications:\n    url: \"${NOTIFICATIONS_SERVICE_URL:}\"\n</code></pre>"},{"location":"module-dependencies/#exemplos-de-execucao","title":"Exemplos de Execu\u00e7\u00e3o","text":""},{"location":"module-dependencies/#desenvolvimento-monolito","title":"Desenvolvimento (Mon\u00f3lito)","text":"<pre><code>./bin/monetics --module=all\n# Todos os m\u00f3dulos usam comunica\u00e7\u00e3o local\n</code></pre>"},{"location":"module-dependencies/#producao-microservicos","title":"Produ\u00e7\u00e3o (Microservi\u00e7os)","text":"<p>Terminal 1 - Servi\u00e7o Auth:</p> <pre><code>export PORT=8081\n./bin/monetics --module=auth\n</code></pre> <p>Terminal 2 - Servi\u00e7o Budget:</p> <pre><code>export PORT=8082\nexport AUTH_SERVICE_URL=http://localhost:8081\n./bin/monetics --module=budget\n</code></pre> <p>Terminal 3 - Servi\u00e7o Notifications:</p> <pre><code>export PORT=8083\nexport AUTH_SERVICE_URL=http://localhost:8081\nexport BUDGET_SERVICE_URL=http://localhost:8082\n./bin/monetics --module=notifications\n</code></pre>"},{"location":"module-dependencies/#resolucao-de-dependencias","title":"Resolu\u00e7\u00e3o de Depend\u00eancias","text":"<p>O sistema automaticamente:</p> <ol> <li>\u2705 Detecta depend\u00eancias circulares (retorna erro)</li> <li>\u2705 Inicializa m\u00f3dulos na ordem correta</li> <li>\u2705 Escolhe comunica\u00e7\u00e3o local vs HTTP automaticamente</li> <li>\u2705 Valida que depend\u00eancias necess\u00e1rias est\u00e3o dispon\u00edveis</li> <li>\u2705 Fornece mensagens de erro claras para depend\u00eancias ausentes</li> </ol>"},{"location":"module-dependencies/#boas-praticas","title":"Boas Pr\u00e1ticas","text":""},{"location":"module-dependencies/#1-manter-dependencias-minimas","title":"1. Manter Depend\u00eancias M\u00ednimas","text":"<pre><code>// \u2705 Bom: Depend\u00eancias espec\u00edficas\nr.Register(\"notifications\", []string{\"auth\"}, ...)\n\n// \u274c Ruim: Muitas depend\u00eancias\nr.Register(\"notifications\", []string{\"auth\", \"budget\", \"user\", \"payment\"}, ...)\n</code></pre>"},{"location":"module-dependencies/#2-usar-interfaces-para-servicos","title":"2. Usar Interfaces para Servi\u00e7os","text":"<pre><code>// Definir interface no pacote de contratos\ntype NotificationService interface {\n    SendEmail(ctx context.Context, email string) error\n}\n\n// Registrar no container\nc.Register(\"notifications.NotificationService\", service)\n</code></pre>"},{"location":"module-dependencies/#3-falhar-rapido-em-dependencias-ausentes","title":"3. Falhar R\u00e1pido em Depend\u00eancias Ausentes","text":"<pre><code>if !c.IsModuleEnabled(\"auth\") &amp;&amp; cfg.Modules.Auth.URL == \"\" {\n    return fmt.Errorf(\"notifications requer servi\u00e7o auth\")\n}\n</code></pre>"},{"location":"module-dependencies/#4-registrar-tipo-de-comunicacao-em-log","title":"4. Registrar Tipo de Comunica\u00e7\u00e3o em Log","text":"<pre><code>if useLocal {\n    log.Info().Msg(\"Usando servi\u00e7o Auth local\")\n} else {\n    log.Info().Str(\"url\", authURL).Msg(\"Usando servi\u00e7o Auth remoto\")\n}\n</code></pre>"},{"location":"module-dependencies/#resolucao-de-problemas","title":"Resolu\u00e7\u00e3o de Problemas","text":""},{"location":"module-dependencies/#module-x-not-registered","title":"\"Module X not registered\"","text":"<p>Causa: M\u00f3dulo n\u00e3o adicionado ao <code>RegisterBuiltInModules()</code> Solu\u00e7\u00e3o: Adicionar registro do m\u00f3dulo em <code>registry.go</code></p>"},{"location":"module-dependencies/#dependency-module-y-not-enabled","title":"\"Dependency module Y not enabled\"","text":"<p>Causa: Rodando m\u00f3dulo sem sua depend\u00eancia e sem URL remota configurada Solu\u00e7\u00e3o: Habilitar m\u00f3dulo de depend\u00eancia ou configurar URL remota</p>"},{"location":"module-dependencies/#dependencias-circulares","title":"Depend\u00eancias Circulares","text":"<p>Causa: M\u00f3dulo A depende de B, e B depende de A Solu\u00e7\u00e3o: Refatorar para remover depend\u00eancia circular ou criar servi\u00e7o compartilhado</p>"},{"location":"module-dependencies/#melhorias-futuras","title":"Melhorias Futuras","text":"<ul> <li> Hot-reload de m\u00f3dulos sem restart</li> <li> Health checks para depend\u00eancias remotas</li> <li> Service discovery autom\u00e1tico (Consul/etcd)</li> <li> Visualiza\u00e7\u00e3o do grafo de depend\u00eancias</li> <li> Suporte a versionamento de m\u00f3dulos</li> </ul>"},{"location":"testing-dependencies/","title":"Testando Depend\u00eancias entre M\u00f3dulos","text":"<p>Este guia demonstra como testar o sistema de inje\u00e7\u00e3o de depend\u00eancias com diferentes configura\u00e7\u00f5es de m\u00f3dulos.</p>"},{"location":"testing-dependencies/#cenarios-de-teste","title":"Cen\u00e1rios de Teste","text":""},{"location":"testing-dependencies/#cenario-1-modo-monolito-todos-os-modulos-locais","title":"Cen\u00e1rio 1: Modo Mon\u00f3lito (Todos os M\u00f3dulos Locais)","text":"<p>Configura\u00e7\u00e3o: Todos os m\u00f3dulos rodam em um \u00fanico processo</p> <pre><code>./bin/monetics --module=all\n</code></pre> <p>Comportamento Esperado:</p> <ul> <li>M\u00f3dulo Auth inicializa primeiro</li> <li>M\u00f3dulo Budget inicializa em segundo (espera pelo auth)</li> <li>Budget usa UserService do Auth local (em mem\u00f3ria)</li> <li>Sem chamadas HTTP entre m\u00f3dulos</li> </ul> <p>Verifica\u00e7\u00e3o:</p> <pre><code># Verificar nos logs por:\n# \"Initializing Auth module...\"\n# \"Auth module started successfully\"\n# \"Initializing Budget module...\"\n# \"Using local Auth service\" (ou similar)\n</code></pre>"},{"location":"testing-dependencies/#cenario-2-servico-apenas-auth","title":"Cen\u00e1rio 2: Servi\u00e7o Apenas Auth","text":"<p>Configura\u00e7\u00e3o: Executar apenas o m\u00f3dulo Auth</p> <pre><code>export PORT=8081\n./bin/monetics --module=auth\n</code></pre> <p>Comportamento Esperado:</p> <ul> <li>Apenas m\u00f3dulo Auth inicializa</li> <li>Endpoints: <code>/v1/auth/*</code></li> <li>Escuta na porta 8081</li> </ul> <p>Verifica\u00e7\u00e3o:</p> <pre><code>curl http://localhost:8081/health\n# Deve retornar health check apenas para o m\u00f3dulo auth\n</code></pre>"},{"location":"testing-dependencies/#cenario-3-servico-budget-com-auth-remoto","title":"Cen\u00e1rio 3: Servi\u00e7o Budget com Auth Remoto","text":"<p>Configura\u00e7\u00e3o: M\u00f3dulo Budget usando HTTP para comunicar com Auth</p> <p>Terminal 1 - Servi\u00e7o Auth:</p> <pre><code>export PORT=8081\n./bin/monetics --module=auth\n</code></pre> <p>Terminal 2 - Servi\u00e7o Budget:</p> <pre><code>export PORT=8082\nexport AUTH_SERVICE_URL=http://localhost:8081\n./bin/monetics --module=budget\n</code></pre> <p>Comportamento Esperado:</p> <ul> <li>M\u00f3dulo Budget inicia</li> <li>Detecta que Auth N\u00c3O est\u00e1 local</li> <li>L\u00ea <code>AUTH_SERVICE_URL</code> da configura\u00e7\u00e3o</li> <li>Usa cliente HTTP para comunicar com Auth</li> <li>Cliente HTTP usa retry + circuit breaker</li> </ul> <p>Verifica\u00e7\u00e3o:</p> <pre><code># No Terminal 2, verificar nos logs:\n# \"Using remote Auth service\"\n# \"auth_url\": \"http://localhost:8081\"\n\n# Testar endpoints do budget (deve funcionar)\ncurl http://localhost:8082/v1/budget/accounts\n\n# Parar Terminal 1 (matar servi\u00e7o Auth)\n# Tentar novamente:\ncurl http://localhost:8082/v1/budget/accounts\n# Deve ver tentativas de retry e ativa\u00e7\u00e3o do circuit breaker\n</code></pre>"},{"location":"testing-dependencies/#cenario-4-erro-de-dependencia-ausente","title":"Cen\u00e1rio 4: Erro de Depend\u00eancia Ausente","text":"<p>Configura\u00e7\u00e3o: Tentar rodar Budget sem servi\u00e7o Auth dispon\u00edvel</p> <pre><code># SEM AUTH_SERVICE_URL configurada\n./bin/monetics --module=budget\n</code></pre> <p>Comportamento Esperado:</p> <ul> <li>M\u00f3dulo Budget tenta inicializar</li> <li>Detecta que Auth N\u00c3O est\u00e1 local</li> <li><code>AUTH_SERVICE_URL</code> est\u00e1 vazio</li> <li>Deve falhar com erro: \"budget requires auth service\"</li> </ul> <p>Verifica\u00e7\u00e3o:</p> <pre><code># Deve ver erro nos logs e aplica\u00e7\u00e3o encerra\n</code></pre>"},{"location":"testing-dependencies/#cenario-5-multiplos-servicos-auth-budget","title":"Cen\u00e1rio 5: M\u00faltiplos Servi\u00e7os (Auth + Budget)","text":"<p>Configura\u00e7\u00e3o: Executar Auth e Budget localmente (mas separadamente)</p> <p>Terminal 1 - Auth:</p> <pre><code>export PORT=8081\n./bin/monetics --module=auth\n</code></pre> <p>Terminal 2 - Budget (com Auth habilitado localmente tamb\u00e9m):</p> <pre><code>export PORT=8082\n./bin/monetics --module=auth,budget\n</code></pre> <p>Comportamento Esperado:</p> <ul> <li>Terminal 2 executa Auth E Budget</li> <li>Budget usa Auth local (em mem\u00f3ria)</li> <li>Terminal 1 e Terminal 2 t\u00eam inst\u00e2ncias independentes do Auth</li> </ul> <p>Nota: Este cen\u00e1rio mostra como voc\u00ea pode executar o mesmo m\u00f3dulo em m\u00faltiplos processos para balanceamento de carga.</p>"},{"location":"testing-dependencies/#testes-de-integracao","title":"Testes de Integra\u00e7\u00e3o","text":""},{"location":"testing-dependencies/#testar-integracao-budget-auth","title":"Testar Integra\u00e7\u00e3o Budget \u2192 Auth","text":"<p>Endpoint: Criar uma transa\u00e7\u00e3o de or\u00e7amento (requer autentica\u00e7\u00e3o de usu\u00e1rio)</p> <p>Script de Teste:</p> <pre><code>#!/bin/bash\n\n# 1. Iniciar servi\u00e7o Auth\nexport PORT=8081\n./bin/monetics --module=auth &amp;\nAUTH_PID=$!\nsleep 2\n\n# 2. Iniciar servi\u00e7o Budget com Auth remoto\nexport PORT=8082\nexport AUTH_SERVICE_URL=http://localhost:8081\n./bin/monetics --module=budget &amp;\nBUDGET_PID=$!\nsleep 2\n\n# 3. Registrar um usu\u00e1rio (servi\u00e7o Auth)\ncurl -X POST http://localhost:8081/v1/auth/register \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"username\": \"testuser\",\n    \"email\": \"test@example.com\",\n    \"password\": \"Test123!@#\"\n  }'\n\n# 4. Login para obter token\nTOKEN=$(curl -X POST http://localhost:8081/v1/auth/login \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"username\": \"testuser\",\n    \"password\": \"Test123!@#\"\n  }' | jq -r '.token')\n\necho \"Token: $TOKEN\"\n\n# 5. Criar conta de or\u00e7amento (servi\u00e7o Budget, autenticado via Auth)\ncurl -X POST http://localhost:8082/v1/budget/accounts \\\n  -H \"Content-Type: application/json\" \\\n  -H \"Authorization: Bearer $TOKEN\" \\\n  -d '{\n    \"name\": \"Conta Corrente\",\n    \"type\": \"checking\",\n    \"currency\": \"BRL\"\n  }'\n\n# 6. Limpeza\nkill $AUTH_PID $BUDGET_PID\n</code></pre> <p>Esperado: Servi\u00e7o Budget valida token chamando o servi\u00e7o Auth (HTTP)</p>"},{"location":"testing-dependencies/#testes-de-performance","title":"Testes de Performance","text":""},{"location":"testing-dependencies/#medir-overhead-local-vs-http","title":"Medir Overhead: Local vs HTTP","text":"<p>Teste: Comparar lat\u00eancia de opera\u00e7\u00f5es do Budget com Auth local vs remoto</p> <p>Configura\u00e7\u00e3o:</p> <pre><code># Teste 1: Mon\u00f3lito (local)\n./bin/monetics --module=all\nab -n 1000 -c 10 http://localhost:8080/v1/budget/accounts\n\n# Teste 2: Microservi\u00e7os (HTTP)\n# Terminal 1:\n./bin/monetics --module=auth\n# Terminal 2:\nexport AUTH_SERVICE_URL=http://localhost:8080\n./bin/monetics --module=budget\nab -n 1000 -c 10 http://localhost:8080/v1/budget/accounts\n</code></pre> <p>M\u00e9tricas para Comparar:</p> <ul> <li>Tempo m\u00e9dio de resposta</li> <li>Lat\u00eancia do percentil 95</li> <li>Requisi\u00e7\u00f5es por segundo</li> <li>Uso de mem\u00f3ria</li> </ul> <p>Esperado: Modo mon\u00f3lito deve ser mais r\u00e1pido (sem overhead de rede)</p>"},{"location":"testing-dependencies/#testes-do-circuit-breaker","title":"Testes do Circuit Breaker","text":""},{"location":"testing-dependencies/#teste-1-circuit-abre-apos-falhas","title":"Teste 1: Circuit Abre Ap\u00f3s Falhas","text":"<p>Configura\u00e7\u00e3o:</p> <pre><code># Terminal 1: Iniciar Auth\n./bin/monetics --module=auth --port=8081\n\n# Terminal 2: Iniciar Budget apontando para Auth\nexport AUTH_SERVICE_URL=http://localhost:8081\n./bin/monetics --module=budget --port=8082\n</code></pre> <p>Passos do Teste:</p> <ol> <li>Fazer requisi\u00e7\u00f5es bem-sucedidas para verificar que funciona</li> <li>Parar servi\u00e7o Auth (matar Terminal 1)</li> <li>Fazer 5+ requisi\u00e7\u00f5es para endpoints do Budget que requerem Auth</li> <li>Verificar logs: Circuit breaker deve abrir ap\u00f3s m\u00e1ximo de falhas (5)</li> <li>Continuar fazendo requisi\u00e7\u00f5es \u2192 Deve falhar r\u00e1pido (sem tentativas de retry)</li> <li>Reiniciar servi\u00e7o Auth (Terminal 1)</li> <li>Aguardar 30 segundos (timeout do circuit breaker)</li> <li>Fazer requisi\u00e7\u00e3o \u2192 Circuit breaker vai para half-open</li> <li>Requisi\u00e7\u00f5es bem-sucedidas \u2192 Circuit breaker fecha</li> </ol> <p>Logs de Verifica\u00e7\u00e3o:</p> <pre><code>[WARN] Chamada ao servi\u00e7o Auth falhou, tentando novamente (tentativa 1/3)\n[WARN] Chamada ao servi\u00e7o Auth falhou, tentando novamente (tentativa 2/3)\n[WARN] Chamada ao servi\u00e7o Auth falhou, tentando novamente (tentativa 3/3)\n[ERROR] Circuit breaker aberto para servi\u00e7o auth\n[INFO] Circuit breaker half-open, testando conex\u00e3o\n[INFO] Circuit breaker fechado, servi\u00e7o recuperado\n</code></pre>"},{"location":"testing-dependencies/#teste-2-backoff-exponencial","title":"Teste 2: Backoff Exponencial","text":"<p>Configura\u00e7\u00e3o: Mesmo do Teste 1</p> <p>Observa\u00e7\u00e3o: Observar timing de retry nos logs</p> <p>Padr\u00e3o Esperado:</p> <ul> <li>Tentativa 1: Imediato</li> <li>Tentativa 2: ~100ms de delay</li> <li>Tentativa 3: ~200ms de delay (com jitter)</li> </ul> <p>Verifica\u00e7\u00e3o:</p> <pre><code># Verificar timestamps nos logs:\n# 2024-01-01T10:00:00.000Z [WARN] Tentativa de retry 1\n# 2024-01-01T10:00:00.100Z [WARN] Tentativa de retry 2  # ~100ms depois\n# 2024-01-01T10:00:00.300Z [WARN] Tentativa de retry 3  # ~200ms depois\n</code></pre>"},{"location":"testing-dependencies/#dicas-de-depuracao","title":"Dicas de Depura\u00e7\u00e3o","text":""},{"location":"testing-dependencies/#habilitar-logging-verboso","title":"Habilitar Logging Verboso","text":"<pre><code>export LOG_LEVEL=debug\n./bin/monetics --module=all\n</code></pre>"},{"location":"testing-dependencies/#verificar-registro-de-modulos","title":"Verificar Registro de M\u00f3dulos","text":"<p>Adicionar logging em <code>registry.go</code>:</p> <pre><code>func (r *ModuleRegistry) Initialize() error {\n    log.Debug().Interface(\"enabled_modules\", r.container.GetModules()).Msg(\"Iniciando inicializa\u00e7\u00e3o\")\n    // ... resto do c\u00f3digo\n}\n</code></pre>"},{"location":"testing-dependencies/#verificar-registro-de-servicos","title":"Verificar Registro de Servi\u00e7os","text":"<p>Adicionar em <code>container.go</code>:</p> <pre><code>func (c *ModuleContainer) Register(name string, service interface{}) {\n    c.logger.Debug().Str(\"service\", name).Msg(\"Registrando servi\u00e7o\")\n    // ... resto do c\u00f3digo\n}\n</code></pre>"},{"location":"testing-dependencies/#inspecionar-requisicoes-http","title":"Inspecionar Requisi\u00e7\u00f5es HTTP","text":"<p>Usar middleware para registrar todas as chamadas HTTP entre servi\u00e7os:</p> <pre><code># Em httpclient, adicionar logging de requisi\u00e7\u00f5es\nlog.Debug().\n    Str(\"method\", req.Method).\n    Str(\"url\", req.URL.String()).\n    Msg(\"Requisi\u00e7\u00e3o HTTP saindo\")\n</code></pre>"},{"location":"testing-dependencies/#problemas-comuns","title":"Problemas Comuns","text":""},{"location":"testing-dependencies/#panic-runtime-error-invalid-memory-address","title":"\"panic: runtime error: invalid memory address\"","text":"<p>Causa: Tentando usar um servi\u00e7o do container que n\u00e3o foi registrado</p> <p>Corre\u00e7\u00e3o: Verificar ordem de inicializa\u00e7\u00e3o de m\u00f3dulos e garantir que todos os servi\u00e7os est\u00e3o registrados</p>"},{"location":"testing-dependencies/#erros-connection-refused","title":"Erros \"connection refused\"","text":"<p>Causa: URL do servi\u00e7o remoto aponta para host/porta errados</p> <p>Corre\u00e7\u00e3o: Verificar vari\u00e1veis de ambiente e configura\u00e7\u00e3o:</p> <pre><code>echo $AUTH_SERVICE_URL\n# Deve corresponder ao endere\u00e7o real do servi\u00e7o Auth\n</code></pre>"},{"location":"testing-dependencies/#budget-inicia-mas-nao-consegue-autenticar-usuarios","title":"Budget inicia mas n\u00e3o consegue autenticar usu\u00e1rios","text":"<p>Causa: Descompasso no JWT secret entre servi\u00e7os Auth e Budget</p> <p>Corre\u00e7\u00e3o: Garantir que ambos os servi\u00e7os usam o mesmo <code>config.yaml</code> ou vari\u00e1vel de ambiente</p>"},{"location":"testing-dependencies/#proximos-passos","title":"Pr\u00f3ximos Passos","text":"<ol> <li>\u2705 Documentar sistema de depend\u00eancia de m\u00f3dulos</li> <li>\u2705 Criar guia de testes</li> <li>\u2b1c Adicionar testes de integra\u00e7\u00e3o automatizados</li> <li>\u2b1c Implementar endpoint de m\u00e9tricas do circuit breaker</li> <li>\u2b1c Adicionar ferramenta de visualiza\u00e7\u00e3o do grafo de depend\u00eancias</li> <li>\u2b1c Criar benchmarks de performance</li> </ol>"},{"location":"api/accounts/","title":"API de Contas","text":"<p>Gerenciamento de contas banc\u00e1rias.</p>"},{"location":"api/accounts/#criar-conta","title":"Criar Conta","text":"<p>Endpoint: <code>POST /v1/budget/accounts</code></p> <p>Headers: <pre><code>Authorization: Bearer &lt;token&gt;\nContent-Type: application/json\n</code></pre></p> <p>Request Body: <pre><code>{\n  \"name\": \"Conta Corrente\",\n  \"type\": \"checking\",\n  \"balance\": 5000.00,\n  \"currency\": \"BRL\",\n  \"is_active\": true,\n  \"description\": \"Minha conta principal\"\n}\n</code></pre></p> <p>Tipos de Conta: - <code>checking</code> - Conta Corrente - <code>savings</code> - Poupan\u00e7a - <code>investment</code> - Investimento - <code>credit_card</code> - Cart\u00e3o de Cr\u00e9dito</p> <p>Response Success (201): <pre><code>{\n  \"success\": true,\n  \"data\": {\n    \"id\": 1,\n    \"user_id\": 1,\n    \"name\": \"Conta Corrente\",\n    \"type\": \"checking\",\n    \"balance\": 5000.00,\n    \"currency\": \"BRL\",\n    \"is_active\": true,\n    \"description\": \"Minha conta principal\",\n    \"created_at\": \"2025-11-25T10:00:00Z\",\n    \"updated_at\": \"2025-11-25T10:00:00Z\"\n  }\n}\n</code></pre></p>"},{"location":"api/accounts/#listar-contas","title":"Listar Contas","text":"<p>Endpoint: <code>GET /v1/budget/accounts</code></p> <p>Query Parameters: - <code>is_active</code> (bool): Filtrar por status ativo</p> <p>Response Success (200): <pre><code>{\n  \"success\": true,\n  \"data\": [\n    {\n      \"id\": 1,\n      \"name\": \"Conta Corrente\",\n      \"type\": \"checking\",\n      \"balance\": 5000.00,\n      \"currency\": \"BRL\",\n      \"is_active\": true\n    }\n  ]\n}\n</code></pre></p>"},{"location":"api/accounts/#buscar-conta-por-id","title":"Buscar Conta por ID","text":"<p>Endpoint: <code>GET /v1/budget/accounts/:id</code></p> <p>Response Success (200): <pre><code>{\n  \"success\": true,\n  \"data\": {\n    \"id\": 1,\n    \"user_id\": 1,\n    \"name\": \"Conta Corrente\",\n    \"type\": \"checking\",\n    \"balance\": 5000.00,\n    \"currency\": \"BRL\",\n    \"is_active\": true,\n    \"created_at\": \"2025-11-25T10:00:00Z\"\n  }\n}\n</code></pre></p>"},{"location":"api/accounts/#consultar-saldo","title":"Consultar Saldo","text":"<p>Endpoint: <code>GET /v1/budget/accounts/:id/balance</code></p> <p>Response Success (200): <pre><code>{\n  \"success\": true,\n  \"data\": {\n    \"account_id\": 1,\n    \"balance\": 5000.00,\n    \"currency\": \"BRL\"\n  }\n}\n</code></pre></p>"},{"location":"api/accounts/#atualizar-conta","title":"Atualizar Conta","text":"<p>Endpoint: <code>PUT /v1/budget/accounts/:id</code></p> <p>Request Body: <pre><code>{\n  \"name\": \"Conta Corrente Principal\",\n  \"is_active\": true\n}\n</code></pre></p>"},{"location":"api/accounts/#deletar-conta","title":"Deletar Conta","text":"<p>Endpoint: <code>DELETE /v1/budget/accounts/:id</code></p> <p>Response Success (204): No content</p> <p>Aten\u00e7\u00e3o</p> <p>Deletar uma conta n\u00e3o deleta as transa\u00e7\u00f5es associadas. Considere desativar em vez de deletar.</p>"},{"location":"api/auth/","title":"API do M\u00f3dulo Auth","text":"<p>Documenta\u00e7\u00e3o completa dos endpoints de autentica\u00e7\u00e3o e gerenciamento de usu\u00e1rios.</p>"},{"location":"api/auth/#autenticacao","title":"Autentica\u00e7\u00e3o","text":""},{"location":"api/auth/#login","title":"Login","text":"<p>Autentica um usu\u00e1rio e retorna um token JWT.</p> <p>Endpoint: <code>POST /v1/auth/login</code></p> <p>Request Body: <pre><code>{\n  \"username\": \"root\",\n  \"password\": \"root123\"\n}\n</code></pre></p> <p>Response Success (200): <pre><code>{\n  \"success\": true,\n  \"data\": {\n    \"token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\",\n    \"user\": {\n      \"id\": 1,\n      \"username\": \"root\",\n      \"roles\": [\n        {\n          \"id\": 1,\n          \"name\": \"admin\",\n          \"description\": \"Administrator role\"\n        }\n      ]\n    }\n  }\n}\n</code></pre></p> <p>Response Error (401): <pre><code>{\n  \"success\": false,\n  \"error\": {\n    \"code\": \"UNAUTHORIZED\",\n    \"message\": \"Invalid credentials\"\n  }\n}\n</code></pre></p>"},{"location":"api/auth/#gerenciamento-de-usuarios","title":"Gerenciamento de Usu\u00e1rios","text":"<p>Todos os endpoints de usu\u00e1rios requerem autentica\u00e7\u00e3o via JWT no header: <pre><code>Authorization: Bearer &lt;token&gt;\n</code></pre></p>"},{"location":"api/auth/#criar-usuario","title":"Criar Usu\u00e1rio","text":"<p>Endpoint: <code>POST /v1/auth/users</code></p> <p>Permiss\u00e3o: <code>users:create</code></p> <p>Request Body: <pre><code>{\n  \"username\": \"johndoe\",\n  \"password\": \"securepass123\",\n  \"role_ids\": [2]\n}\n</code></pre></p> <p>Response Success (201): <pre><code>{\n  \"success\": true,\n  \"data\": {\n    \"id\": 2,\n    \"username\": \"johndoe\",\n    \"roles\": [\n      {\n        \"id\": 2,\n        \"name\": \"user\"\n      }\n    ]\n  }\n}\n</code></pre></p>"},{"location":"api/auth/#listar-usuarios","title":"Listar Usu\u00e1rios","text":"<p>Endpoint: <code>GET /v1/auth/users</code></p> <p>Permiss\u00e3o: <code>users:read</code></p> <p>Query Parameters: - <code>page</code> (int): N\u00famero da p\u00e1gina (default: 1) - <code>limit</code> (int): Itens por p\u00e1gina (default: 10)</p> <p>Response Success (200): <pre><code>{\n  \"success\": true,\n  \"data\": [\n    {\n      \"id\": 1,\n      \"username\": \"root\",\n      \"roles\": [{\"id\": 1, \"name\": \"admin\"}]\n    },\n    {\n      \"id\": 2,\n      \"username\": \"johndoe\",\n      \"roles\": [{\"id\": 2, \"name\": \"user\"}]\n    }\n  ],\n  \"meta\": {\n    \"page\": 1,\n    \"limit\": 10,\n    \"total\": 2\n  }\n}\n</code></pre></p>"},{"location":"api/auth/#buscar-usuario-por-id","title":"Buscar Usu\u00e1rio por ID","text":"<p>Endpoint: <code>GET /v1/auth/users/:id</code></p> <p>Permiss\u00e3o: <code>users:read</code></p> <p>Response Success (200): <pre><code>{\n  \"success\": true,\n  \"data\": {\n    \"id\": 1,\n    \"username\": \"root\",\n    \"roles\": [\n      {\n        \"id\": 1,\n        \"name\": \"admin\",\n        \"description\": \"Administrator role\"\n      }\n    ]\n  }\n}\n</code></pre></p> <p>Response Error (404): <pre><code>{\n  \"success\": false,\n  \"error\": {\n    \"code\": \"NOT_FOUND\",\n    \"message\": \"User not found\"\n  }\n}\n</code></pre></p>"},{"location":"api/auth/#atualizar-usuario","title":"Atualizar Usu\u00e1rio","text":"<p>Endpoint: <code>PUT /v1/auth/users/:id</code></p> <p>Permiss\u00e3o: <code>users:update</code></p> <p>Request Body: <pre><code>{\n  \"password\": \"newpassword123\",\n  \"role_ids\": [1, 2]\n}\n</code></pre></p> <p>Response Success (200): <pre><code>{\n  \"success\": true,\n  \"data\": {\n    \"id\": 2,\n    \"username\": \"johndoe\",\n    \"roles\": [\n      {\"id\": 1, \"name\": \"admin\"},\n      {\"id\": 2, \"name\": \"user\"}\n    ]\n  }\n}\n</code></pre></p>"},{"location":"api/auth/#deletar-usuario","title":"Deletar Usu\u00e1rio","text":"<p>Endpoint: <code>DELETE /v1/auth/users/:id</code></p> <p>Permiss\u00e3o: <code>users:delete</code></p> <p>Response Success (204): No content</p>"},{"location":"api/auth/#gerenciamento-de-roles","title":"Gerenciamento de Roles","text":""},{"location":"api/auth/#listar-roles","title":"Listar Roles","text":"<p>Endpoint: <code>GET /v1/auth/roles</code></p> <p>Permiss\u00e3o: <code>roles:read</code></p> <p>Response Success (200): <pre><code>{\n  \"success\": true,\n  \"data\": [\n    {\n      \"id\": 1,\n      \"name\": \"admin\",\n      \"description\": \"Administrator role\",\n      \"permissions\": [\n        {\n          \"id\": 1,\n          \"name\": \"users:create\",\n          \"resource\": \"users\",\n          \"action\": \"create\"\n        }\n      ]\n    }\n  ]\n}\n</code></pre></p>"},{"location":"api/auth/#criar-role","title":"Criar Role","text":"<p>Endpoint: <code>POST /v1/auth/roles</code></p> <p>Permiss\u00e3o: <code>roles:create</code></p> <p>Request Body: <pre><code>{\n  \"name\": \"manager\",\n  \"description\": \"Manager role\",\n  \"permission_ids\": [1, 2, 3]\n}\n</code></pre></p>"},{"location":"api/auth/#gerenciamento-de-permissions","title":"Gerenciamento de Permissions","text":""},{"location":"api/auth/#listar-permissions","title":"Listar Permissions","text":"<p>Endpoint: <code>GET /v1/auth/permissions</code></p> <p>Permiss\u00e3o: <code>permissions:read</code></p> <p>Response Success (200): <pre><code>{\n  \"success\": true,\n  \"data\": [\n    {\n      \"id\": 1,\n      \"name\": \"users:create\",\n      \"description\": \"Create users\",\n      \"resource\": \"users\",\n      \"action\": \"create\"\n    },\n    {\n      \"id\": 2,\n      \"name\": \"users:read\",\n      \"description\": \"Read users\",\n      \"resource\": \"users\",\n      \"action\": \"read\"\n    }\n  ]\n}\n</code></pre></p>"},{"location":"api/auth/#criar-permission","title":"Criar Permission","text":"<p>Endpoint: <code>POST /v1/auth/permissions</code></p> <p>Permiss\u00e3o: <code>permissions:create</code></p> <p>Request Body: <pre><code>{\n  \"name\": \"reports:read\",\n  \"description\": \"Read financial reports\",\n  \"resource\": \"reports\",\n  \"action\": \"read\"\n}\n</code></pre></p>"},{"location":"api/auth/#codigos-de-erro","title":"C\u00f3digos de Erro","text":"C\u00f3digo Descri\u00e7\u00e3o <code>UNAUTHORIZED</code> Credenciais inv\u00e1lidas ou token expirado <code>FORBIDDEN</code> Usu\u00e1rio n\u00e3o tem permiss\u00e3o <code>NOT_FOUND</code> Recurso n\u00e3o encontrado <code>VALIDATION_ERROR</code> Dados inv\u00e1lidos <code>CONFLICT</code> Recurso j\u00e1 existe (ex: username duplicado) <code>INTERNAL_ERROR</code> Erro interno do servidor"},{"location":"api/auth/#permissoes-padrao","title":"Permiss\u00f5es Padr\u00e3o","text":"<p>O sistema vem com as seguintes permiss\u00f5es pr\u00e9-configuradas:</p>"},{"location":"api/auth/#users","title":"Users","text":"<ul> <li><code>users:create</code></li> <li><code>users:read</code></li> <li><code>users:update</code></li> <li><code>users:delete</code></li> </ul>"},{"location":"api/auth/#roles","title":"Roles","text":"<ul> <li><code>roles:create</code></li> <li><code>roles:read</code></li> <li><code>roles:update</code></li> <li><code>roles:delete</code></li> </ul>"},{"location":"api/auth/#permissions","title":"Permissions","text":"<ul> <li><code>permissions:create</code></li> <li><code>permissions:read</code></li> <li><code>permissions:update</code></li> <li><code>permissions:delete</code></li> </ul>"},{"location":"api/auth/#budget-todas-as-permissoes-de-budget","title":"Budget (todas as permiss\u00f5es de budget)","text":"<ul> <li><code>accounts:*</code></li> <li><code>categories:*</code></li> <li><code>transactions:*</code></li> <li><code>budgets:*</code></li> <li><code>reports:*</code></li> </ul> <p>O role admin tem todas as permiss\u00f5es. O role user tem permiss\u00f5es de leitura e escrita no m\u00f3dulo budget apenas.</p>"},{"location":"api/health/","title":"API de Health Check","text":""},{"location":"api/health/#visao-geral","title":"Vis\u00e3o Geral","text":"<p>A API de Health Check fornece endpoints para verificar a sa\u00fade da aplica\u00e7\u00e3o e suas depend\u00eancias.</p>"},{"location":"api/health/#endpoints","title":"Endpoints","text":""},{"location":"api/health/#get-health","title":"GET /health","text":"<p>Retorna o status de sa\u00fade b\u00e1sico da aplica\u00e7\u00e3o.</p> <p>Resposta de Sucesso (200 OK):</p> <pre><code>{\n  \"status\": \"healthy\",\n  \"timestamp\": \"2024-01-15T10:30:00Z\"\n}\n</code></pre> <p>Resposta de Falha (503 Service Unavailable):</p> <pre><code>{\n  \"status\": \"unhealthy\",\n  \"timestamp\": \"2024-01-15T10:30:00Z\",\n  \"details\": {\n    \"database\": \"connection failed\"\n  }\n}\n</code></pre>"},{"location":"api/health/#get-healthready","title":"GET /health/ready","text":"<p>Verifica se a aplica\u00e7\u00e3o est\u00e1 pronta para receber tr\u00e1fego (readiness probe).</p> <p>Resposta de Sucesso (200 OK):</p> <pre><code>{\n  \"status\": \"ready\",\n  \"timestamp\": \"2024-01-15T10:30:00Z\"\n}\n</code></pre> <p>Resposta de Falha (503 Service Unavailable):</p> <pre><code>{\n  \"status\": \"not_ready\",\n  \"timestamp\": \"2024-01-15T10:30:00Z\",\n  \"reason\": \"database connection not established\"\n}\n</code></pre>"},{"location":"api/health/#get-healthlive","title":"GET /health/live","text":"<p>Verifica se a aplica\u00e7\u00e3o est\u00e1 viva (liveness probe).</p> <p>Resposta de Sucesso (200 OK):</p> <pre><code>{\n  \"status\": \"alive\",\n  \"timestamp\": \"2024-01-15T10:30:00Z\"\n}\n</code></pre>"},{"location":"api/health/#health-checks-implementados","title":"Health Checks Implementados","text":""},{"location":"api/health/#1-database-health-check","title":"1. Database Health Check","text":"<p>Verifica conectividade com o banco de dados.</p> <p>Crit\u00e9rios: - Conex\u00e3o estabelecida - Ping bem-sucedido - Pool de conex\u00f5es dispon\u00edvel</p> <p>Falha se: - N\u00e3o consegue conectar - Timeout na query - Pool esgotado</p>"},{"location":"api/health/#2-module-health-check","title":"2. Module Health Check","text":"<p>Verifica se todos os m\u00f3dulos habilitados est\u00e3o funcionando.</p> <p>Crit\u00e9rios: - Todos os m\u00f3dulos inicializados - Depend\u00eancias resolvidas - Servi\u00e7os registrados</p> <p>Falha se: - M\u00f3dulo n\u00e3o inicializou - Depend\u00eancia faltando - Falha na inicializa\u00e7\u00e3o</p>"},{"location":"api/health/#configuracao","title":"Configura\u00e7\u00e3o","text":""},{"location":"api/health/#timeouts","title":"Timeouts","text":"<pre><code>health:\n  timeout: 5s\n  database_timeout: 3s\n</code></pre>"},{"location":"api/health/#intervalos-de-verificacao-kubernetes","title":"Intervalos de Verifica\u00e7\u00e3o (Kubernetes)","text":"<pre><code>livenessProbe:\n  httpGet:\n    path: /health/live\n    port: 8080\n  initialDelaySeconds: 30\n  periodSeconds: 10\n  timeoutSeconds: 5\n  failureThreshold: 3\n\nreadinessProbe:\n  httpGet:\n    path: /health/ready\n    port: 8080\n  initialDelaySeconds: 10\n  periodSeconds: 5\n  timeoutSeconds: 3\n  failureThreshold: 3\n</code></pre>"},{"location":"api/health/#uso-em-diferentes-ambientes","title":"Uso em Diferentes Ambientes","text":""},{"location":"api/health/#desenvolvimento-local","title":"Desenvolvimento Local","text":"<pre><code># Verificar sa\u00fade\ncurl http://localhost:8080/health\n\n# Verificar readiness\ncurl http://localhost:8080/health/ready\n\n# Verificar liveness\ncurl http://localhost:8080/health/live\n</code></pre>"},{"location":"api/health/#docker","title":"Docker","text":"<pre><code>HEALTHCHECK --interval=30s --timeout=3s --start-period=40s --retries=3 \\\n  CMD curl -f http://localhost:8080/health || exit 1\n</code></pre>"},{"location":"api/health/#docker-compose","title":"Docker Compose","text":"<pre><code>services:\n  api:\n    image: monetics:latest\n    healthcheck:\n      test: [\"CMD\", \"curl\", \"-f\", \"http://localhost:8080/health\"\\]\n      interval: 30s\n      timeout: 3s\n      retries: 3\n      start_period: 40s\n</code></pre>"},{"location":"api/health/#monitoramento","title":"Monitoramento","text":""},{"location":"api/health/#metricas-recomendadas","title":"M\u00e9tricas Recomendadas","text":"<ul> <li>health_check_duration: Tempo de execu\u00e7\u00e3o do health check</li> <li>health_check_failures: N\u00famero de falhas consecutivas</li> <li>dependency_status: Status de cada depend\u00eancia</li> </ul>"},{"location":"api/health/#alertas","title":"Alertas","text":"<p>Configure alertas para:</p> <ul> <li>Health check falhando por mais de 2 minutos</li> <li>Readiness probe falhando</li> <li>Database health check falhando</li> </ul>"},{"location":"api/health/#boas-praticas","title":"Boas Pr\u00e1ticas","text":"<ol> <li>Use Readiness para Rolling Updates: Previne tr\u00e1fego antes da aplica\u00e7\u00e3o estar pronta</li> <li>Use Liveness para Detectar Deadlocks: Reinicia aplica\u00e7\u00e3o se ela parar de responder</li> <li>Configure Timeouts Apropriados: Evite falsos positivos</li> <li>Monitore M\u00e9tricas: Track tend\u00eancias de sa\u00fade ao longo do tempo</li> </ol>"},{"location":"api/health/#troubleshooting","title":"Troubleshooting","text":""},{"location":"api/health/#health-check-falhando","title":"Health Check Falhando","text":"<ol> <li>Verifique logs da aplica\u00e7\u00e3o</li> <li>Teste conex\u00e3o com banco de dados manualmente</li> <li>Verifique status dos m\u00f3dulos</li> <li>Valide configura\u00e7\u00e3o</li> </ol>"},{"location":"api/health/#readiness-probe-falhando","title":"Readiness Probe Falhando","text":"<ol> <li>Verifique se aplica\u00e7\u00e3o terminou inicializa\u00e7\u00e3o</li> <li>Valide todas as depend\u00eancias est\u00e3o dispon\u00edveis</li> <li>Verifique logs de startup</li> </ol>"},{"location":"api/health/#documentacao-relacionada","title":"Documenta\u00e7\u00e3o Relacionada","text":"<ul> <li>Vis\u00e3o Geral de Arquitetura</li> <li>Padr\u00f5es de Comunica\u00e7\u00e3o</li> </ul>"},{"location":"architecture/communication/","title":"Padr\u00f5es de Comunica\u00e7\u00e3o","text":""},{"location":"architecture/communication/#visao-geral","title":"Vis\u00e3o Geral","text":"<p>O Monetics suporta dois modos de comunica\u00e7\u00e3o entre m\u00f3dulos:</p> <ol> <li>Comunica\u00e7\u00e3o Local: M\u00f3dulos compartilhando o mesmo processo</li> <li>Comunica\u00e7\u00e3o HTTP: M\u00f3dulos executando como servi\u00e7os separados</li> </ol> <p>Este design permite flexibilidade total de deployment - voc\u00ea pode executar tudo como um mon\u00f3lito ou dividir em microservi\u00e7os independentes.</p>"},{"location":"architecture/communication/#comunicacao-local-monolito","title":"Comunica\u00e7\u00e3o Local (Mon\u00f3lito)","text":""},{"location":"architecture/communication/#quando-usar","title":"Quando Usar","text":"<ul> <li>Desenvolvimento local</li> <li>Deployments pequenos a m\u00e9dios</li> <li>Prioridade em baixa lat\u00eancia</li> <li>Configura\u00e7\u00e3o simplificada</li> <li>Uso eficiente de recursos</li> </ul>"},{"location":"architecture/communication/#como-funciona","title":"Como Funciona","text":"<pre><code>// M\u00f3dulo Auth registra servi\u00e7os localmente\ncontainer.Register(\"UserService\", userService)\n\n// M\u00f3dulo Budget recupera servi\u00e7os do mesmo container\nuserService := container.Get(\"UserService\").(UserServiceInterface)\n</code></pre> <p>Benef\u00edcios: - Sem lat\u00eancia de rede - Sem serializa\u00e7\u00e3o/desserializa\u00e7\u00e3o - Tipagem forte em tempo de compila\u00e7\u00e3o - Transa\u00e7\u00f5es compartilhadas poss\u00edveis - Debugging simplificado</p> <p>Trade-offs: - Escalabilidade acoplada (todos os m\u00f3dulos escalam juntos) - Falhas podem afetar todos os m\u00f3dulos - Deploy de uma \u00fanica unidade</p>"},{"location":"architecture/communication/#comunicacao-http-microservicos","title":"Comunica\u00e7\u00e3o HTTP (Microservi\u00e7os)","text":""},{"location":"architecture/communication/#quando-usar_1","title":"Quando Usar","text":"<ul> <li>Escalabilidade independente de m\u00f3dulos</li> <li>Equipes distribu\u00eddas</li> <li>Deploys independentes necess\u00e1rios</li> <li>Isolamento de falhas cr\u00edtico</li> <li>Sistemas de grande escala</li> </ul>"},{"location":"architecture/communication/#como-funciona_1","title":"Como Funciona","text":"<pre><code>// M\u00f3dulo Budget detecta que Auth est\u00e1 remoto\nif container.Has(\"UserService\") {\n    // Local: usar servi\u00e7o direto\n    userService = container.Get(\"UserService\")\n} else {\n    // Remoto: usar cliente HTTP\n    userService = NewHTTPUserServiceClient(authServiceURL)\n}\n</code></pre> <p>Benef\u00edcios: - Escalabilidade independente - Deploys independentes - Isolamento de falhas - Escolha flex\u00edvel de tecnologia - Limites claros entre servi\u00e7os</p> <p>Trade-offs: - Lat\u00eancia de rede adicionada - Necessita de retry logic e circuit breakers - Gerenciamento de configura\u00e7\u00e3o mais complexo - Tratamento de erros distribu\u00eddos</p>"},{"location":"architecture/communication/#camada-de-abstracao-de-comunicacao","title":"Camada de Abstra\u00e7\u00e3o de Comunica\u00e7\u00e3o","text":"<p>O sistema usa interfaces para abstrair o meio de comunica\u00e7\u00e3o:</p> <pre><code>// Interface \u00fanica para ambos os modos\ntype UserServiceInterface interface {\n    GetUserByID(ctx context.Context, id string) (*User, error)\n    ValidateUser(ctx context.Context, token string) (*User, error)\n}\n\n// Implementa\u00e7\u00e3o local (em mem\u00f3ria)\ntype LocalUserService struct {\n    repo UserRepository\n}\n\n// Implementa\u00e7\u00e3o remota (HTTP)\ntype HTTPUserServiceClient struct {\n    baseURL    string\n    httpClient *http.Client\n    retrier    *Retrier\n    breaker    *CircuitBreaker\n}\n</code></pre>"},{"location":"architecture/communication/#beneficios-da-abstracao","title":"Benef\u00edcios da Abstra\u00e7\u00e3o","text":"<ol> <li>Transpar\u00eancia: O c\u00f3digo do m\u00f3dulo n\u00e3o precisa saber se est\u00e1 falando local ou remotamente</li> <li>Testabilidade: F\u00e1cil criar mocks e stubs</li> <li>Flexibilidade: Mudar de local para remoto n\u00e3o requer mudan\u00e7as no c\u00f3digo</li> <li>Migra\u00e7\u00e3o Gradual: Come\u00e7ar como mon\u00f3lito, migrar para microservi\u00e7os incrementalmente</li> </ol>"},{"location":"architecture/communication/#resiliencia-em-comunicacao-http","title":"Resili\u00eancia em Comunica\u00e7\u00e3o HTTP","text":""},{"location":"architecture/communication/#retry-logic","title":"Retry Logic","text":"<pre><code>type Retrier struct {\n    maxRetries     int\n    initialBackoff time.Duration\n    maxBackoff     time.Duration\n}\n\nfunc (r *Retrier) Do(operation func() error) error {\n    backoff := r.initialBackoff\n    for i := 0; i &lt; r.maxRetries; i++ {\n        err := operation()\n        if err == nil {\n            return nil\n        }\n\n        if !isRetriable(err) {\n            return err\n        }\n\n        time.Sleep(backoff)\n        backoff = min(backoff*2, r.maxBackoff)\n    }\n    return fmt.Errorf(\"max retries exceeded\")\n}\n</code></pre> <p>Configura\u00e7\u00e3o: - Max Retries: 3 - Initial Backoff: 100ms - Max Backoff: 2s - Estrat\u00e9gia: Exponential backoff</p>"},{"location":"architecture/communication/#circuit-breaker","title":"Circuit Breaker","text":"<pre><code>type CircuitBreaker struct {\n    failureThreshold int\n    resetTimeout     time.Duration\n    state            State // Closed, Open, HalfOpen\n}\n\nfunc (cb *CircuitBreaker) Call(operation func() error) error {\n    if cb.state == Open {\n        if time.Since(cb.lastFailure) &gt; cb.resetTimeout {\n            cb.state = HalfOpen\n        } else {\n            return ErrCircuitOpen\n        }\n    }\n\n    err := operation()\n    if err != nil {\n        cb.recordFailure()\n        return err\n    }\n\n    cb.recordSuccess()\n    return nil\n}\n</code></pre> <p>Configura\u00e7\u00e3o: - Failure Threshold: 5 falhas consecutivas - Reset Timeout: 30s - Estados: Closed \u2192 Open \u2192 HalfOpen \u2192 Closed</p>"},{"location":"architecture/communication/#timeout-configuration","title":"Timeout Configuration","text":"<pre><code>// Cliente HTTP com timeouts\nhttpClient := &amp;http.Client{\n    Timeout: 10 * time.Second,\n    Transport: &amp;http.Transport{\n        DialContext: (&amp;net.Dialer{\n            Timeout:   5 * time.Second,\n        }).DialContext,\n        TLSHandshakeTimeout:   5 * time.Second,\n        ResponseHeaderTimeout: 5 * time.Second,\n    },\n}\n</code></pre>"},{"location":"architecture/communication/#configuracao","title":"Configura\u00e7\u00e3o","text":""},{"location":"architecture/communication/#modo-local-configyaml","title":"Modo Local (config.yaml)","text":"<pre><code>modules:\n  enabled:\n    - auth\n    - budget\n\n# Sem configura\u00e7\u00e3o de URLs de servi\u00e7os = modo local\n</code></pre>"},{"location":"architecture/communication/#modo-microservicos-configyaml","title":"Modo Microservi\u00e7os (config.yaml)","text":"<pre><code>modules:\n  enabled:\n    - budget  # Apenas budget habilitado neste servi\u00e7o\n\n  service_urls:\n    auth: \"http://auth-service:8081\"\n\n  http_client:\n    timeout: 10s\n    max_retries: 3\n    circuit_breaker:\n      failure_threshold: 5\n      reset_timeout: 30s\n</code></pre>"},{"location":"architecture/communication/#variaveis-de-ambiente","title":"Vari\u00e1veis de Ambiente","text":"<pre><code># Servi\u00e7o Auth\nexport MODULE=auth\nexport PORT=8081\n\n# Servi\u00e7o Budget\nexport MODULE=budget\nexport PORT=8082\nexport AUTH_SERVICE_URL=http://localhost:8081\n</code></pre>"},{"location":"architecture/communication/#exemplos-praticos","title":"Exemplos Pr\u00e1ticos","text":""},{"location":"architecture/communication/#exemplo-1-desenvolvimento-local-monolito","title":"Exemplo 1: Desenvolvimento Local (Mon\u00f3lito)","text":"<pre><code># Iniciar todos os m\u00f3dulos em um processo\n./bin/monetics --module=all\n\n# Ou via Makefile\nmake run\n</code></pre> <p>Resultado: - Auth e Budget no mesmo processo - Comunica\u00e7\u00e3o local (sem HTTP) - Porta \u00fanica: 8080</p>"},{"location":"architecture/communication/#exemplo-2-microservicos-separados","title":"Exemplo 2: Microservi\u00e7os Separados","text":"<pre><code># Terminal 1: Iniciar Auth\n./bin/monetics --module=auth --port=8081\n\n# Terminal 2: Iniciar Budget\nexport AUTH_SERVICE_URL=http://localhost:8081\n./bin/monetics --module=budget --port=8082\n</code></pre> <p>Resultado: - Auth na porta 8081 - Budget na porta 8082 - Budget \u2192 Auth via HTTP</p>"},{"location":"architecture/communication/#exemplo-3-docker-compose","title":"Exemplo 3: Docker Compose","text":"<pre><code>version: '3.8'\n\nservices:\n  auth:\n    image: monetics:latest\n    command: [\"--module=auth\"]\n    ports:\n      - \"8081:8080\"\n    environment:\n      - MODULE=auth\n\n  budget:\n    image: monetics:latest\n    command: [\"--module=budget\"]\n    ports:\n      - \"8082:8080\"\n    environment:\n      - MODULE=budget\n      - AUTH_SERVICE_URL=http://auth:8080\n    depends_on:\n      - auth\n</code></pre>"},{"location":"architecture/communication/#monitoramento-e-observabilidade","title":"Monitoramento e Observabilidade","text":""},{"location":"architecture/communication/#logs","title":"Logs","text":"<pre><code>// Comunica\u00e7\u00e3o local\nlog.Info().\n    Str(\"module\", \"budget\").\n    Str(\"dependency\", \"auth\").\n    Str(\"method\", \"GetUserByID\").\n    Str(\"mode\", \"local\").\n    Msg(\"calling user service\")\n\n// Comunica\u00e7\u00e3o HTTP\nlog.Info().\n    Str(\"module\", \"budget\").\n    Str(\"dependency\", \"auth\").\n    Str(\"method\", \"GetUserByID\").\n    Str(\"mode\", \"http\").\n    Str(\"url\", authServiceURL).\n    Int(\"attempt\", retry).\n    Msg(\"calling user service\")\n</code></pre>"},{"location":"architecture/communication/#metricas-recomendadas","title":"M\u00e9tricas Recomendadas","text":"<ul> <li>Lat\u00eancia: Tempo de resposta (p50, p95, p99)</li> <li>Taxa de Erro: Percentual de requisi\u00e7\u00f5es com falha</li> <li>Taxa de Retry: Quantas requisi\u00e7\u00f5es precisaram de retry</li> <li>Circuit Breaker: Estado e mudan\u00e7as de estado</li> <li>Throughput: Requisi\u00e7\u00f5es por segundo</li> </ul>"},{"location":"architecture/communication/#boas-praticas","title":"Boas Pr\u00e1ticas","text":""},{"location":"architecture/communication/#1-comece-simples","title":"1. Comece Simples","text":"<ul> <li>Inicie com modo mon\u00f3lito (local)</li> <li>Me\u00e7a e profile antes de dividir</li> <li>Adicione complexidade apenas quando necess\u00e1rio</li> </ul>"},{"location":"architecture/communication/#2-design-para-ambos-os-modos","title":"2. Design para Ambos os Modos","text":"<ul> <li>Use interfaces desde o in\u00edcio</li> <li>Evite assumir comunica\u00e7\u00e3o local</li> <li>Sempre considere lat\u00eancia e falhas de rede</li> </ul>"},{"location":"architecture/communication/#3-implemente-resiliencia","title":"3. Implemente Resili\u00eancia","text":"<ul> <li>Use timeouts em todas as chamadas</li> <li>Implemente retry com backoff exponencial</li> <li>Adicione circuit breakers para falhas persistentes</li> <li>Log todas as intera\u00e7\u00f5es de servi\u00e7os</li> </ul>"},{"location":"architecture/communication/#4-teste-ambos-os-modos","title":"4. Teste Ambos os Modos","text":"<ul> <li>Testes unit\u00e1rios com mocks</li> <li>Testes de integra\u00e7\u00e3o locais</li> <li>Testes de integra\u00e7\u00e3o distribu\u00eddos</li> <li>Testes de caos (chaos engineering)</li> </ul>"},{"location":"architecture/communication/#5-monitore-tudo","title":"5. Monitore Tudo","text":"<ul> <li>Log cada chamada de servi\u00e7o</li> <li>Colete m\u00e9tricas de performance</li> <li>Configure alertas para circuit breakers</li> <li>Track taxa de retry</li> </ul>"},{"location":"architecture/communication/#troubleshooting","title":"Troubleshooting","text":""},{"location":"architecture/communication/#problema-service-not-available","title":"Problema: \"Service not available\"","text":"<p>Causa: M\u00f3dulo dependente n\u00e3o est\u00e1 inicializado ou n\u00e3o est\u00e1 acess\u00edvel</p> <p>Solu\u00e7\u00e3o: 1. Verifique se o m\u00f3dulo est\u00e1 habilitado no config 2. Para modo HTTP, verifique <code>service_urls</code> na configura\u00e7\u00e3o 3. Verifique logs de inicializa\u00e7\u00e3o 4. Teste conectividade de rede (se distribu\u00eddo)</p>"},{"location":"architecture/communication/#problema-circuit-breaker-open","title":"Problema: \"Circuit breaker open\"","text":"<p>Causa: Muitas falhas consecutivas para um servi\u00e7o</p> <p>Solu\u00e7\u00e3o: 1. Verifique sa\u00fade do servi\u00e7o dependente 2. Revise logs de erro do servi\u00e7o 3. Aguarde reset timeout (30s por padr\u00e3o) 4. Investigue causa raiz das falhas 5. </p>"},{"location":"architecture/communication/#problema-alto-tempo-de-resposta","title":"Problema: Alto tempo de resposta","text":"<p>Causa: Pode ser lat\u00eancia de rede ou processamento lento</p> <p>Solu\u00e7\u00e3o: 1. Verifique m\u00e9tricas de lat\u00eancia de rede 2. Profile o servi\u00e7o dependente 3. Considere caching 4. Revise timeouts e retry logic</p>"},{"location":"architecture/communication/#documentacao-relacionada","title":"Documenta\u00e7\u00e3o Relacionada","text":"<ul> <li>Depend\u00eancias entre M\u00f3dulos</li> <li>Testando Depend\u00eancias</li> <li>Grafo de Depend\u00eancias</li> </ul>"},{"location":"architecture/database/","title":"Banco de Dados","text":"<p>O Monetics utiliza PostgreSQL como banco de dados relacional, com GORM para ORM e migrations autom\u00e1ticas.</p>"},{"location":"architecture/database/#visao-geral-do-schema","title":"Vis\u00e3o Geral do Schema","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502    users    \u2502\u2500\u2500\u2500\u2500\u2500\u2500&lt;\u2502  user_roles  \u2502&gt;\u2500\u2500\u2500\u2500\u2500\u2500\u2502    roles    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                                     \u2502\n                                                     \u2502\n                                              \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                                              \u2502 role_perms   \u2502\n                                              \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                                     \u2502\n                                              \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                                              \u2502 permissions  \u2502\n                                              \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   accounts  \u2502&lt;\u2500\u2500\u2500\u2500\u2500\u2500\u2502 transactions \u2502\u2500\u2500\u2500\u2500\u2500\u2500&gt;\u2502 categories  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n      \u2502                      \u2502                       \u2502\n      \u2502                      \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n      \u2502                                              \u2502\n      \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                             \u2502\n                      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                      \u2502   budgets    \u2502\n                      \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"architecture/database/#tabelas-do-modulo-auth","title":"Tabelas do M\u00f3dulo Auth","text":""},{"location":"architecture/database/#users","title":"users","text":"<p>Armazena os usu\u00e1rios do sistema.</p> Campo Tipo Descri\u00e7\u00e3o id SERIAL PK username VARCHAR(50) UNIQUE, NOT NULL password_hash VARCHAR(255) NOT NULL created_at TIMESTAMP NOT NULL updated_at TIMESTAMP NOT NULL"},{"location":"architecture/database/#roles","title":"roles","text":"<p>Define os pap\u00e9is no sistema.</p> Campo Tipo Descri\u00e7\u00e3o id SERIAL PK name VARCHAR(50) UNIQUE, NOT NULL description TEXT Descri\u00e7\u00e3o do role created_at TIMESTAMP NOT NULL updated_at TIMESTAMP NOT NULL <p>Roles padr\u00e3o: <code>admin</code>, <code>user</code></p>"},{"location":"architecture/database/#permissions","title":"permissions","text":"<p>Define permiss\u00f5es granulares.</p> Campo Tipo Descri\u00e7\u00e3o id SERIAL PK name VARCHAR(100) UNIQUE, NOT NULL description TEXT Descri\u00e7\u00e3o resource VARCHAR(50) Recurso (users, accounts, etc) action VARCHAR(50) A\u00e7\u00e3o (create, read, update, delete) created_at TIMESTAMP NOT NULL updated_at TIMESTAMP NOT NULL"},{"location":"architecture/database/#user_roles","title":"user_roles","text":"<p>Relacionamento muitos-para-muitos entre users e roles.</p> Campo Tipo Descri\u00e7\u00e3o user_id INTEGER FK \u2192 users.id role_id INTEGER FK \u2192 roles.id <p>PK Composta: (user_id, role_id)</p>"},{"location":"architecture/database/#role_permissions","title":"role_permissions","text":"<p>Relacionamento muitos-para-muitos entre roles e permissions.</p> Campo Tipo Descri\u00e7\u00e3o role_id INTEGER FK \u2192 roles.id permission_id INTEGER FK \u2192 permissions.id <p>PK Composta: (role_id, permission_id)</p>"},{"location":"architecture/database/#audit_logs","title":"audit_logs","text":"<p>Registra a\u00e7\u00f5es dos usu\u00e1rios para auditoria.</p> Campo Tipo Descri\u00e7\u00e3o id SERIAL PK user_id INTEGER FK \u2192 users.id, NOT NULL action VARCHAR(50) A\u00e7\u00e3o realizada resource_type VARCHAR(50) Tipo do recurso resource_id INTEGER ID do recurso ip_address VARCHAR(45) IP do usu\u00e1rio details TEXT Detalhes adicionais created_at TIMESTAMP NOT NULL"},{"location":"architecture/database/#tabelas-do-modulo-budget","title":"Tabelas do M\u00f3dulo Budget","text":""},{"location":"architecture/database/#accounts","title":"accounts","text":"<p>Contas banc\u00e1rias dos usu\u00e1rios.</p> Campo Tipo Descri\u00e7\u00e3o id SERIAL PK user_id INTEGER FK \u2192 users.id, NOT NULL name VARCHAR(100) NOT NULL type VARCHAR(20) checking, savings, investment balance DECIMAL(15,2) Saldo atual currency VARCHAR(3) BRL, USD, EUR is_active BOOLEAN Conta ativa? description TEXT Descri\u00e7\u00e3o created_at TIMESTAMP NOT NULL updated_at TIMESTAMP NOT NULL <p>\u00cdndices: user_id, is_active</p>"},{"location":"architecture/database/#categories","title":"categories","text":"<p>Categorias para organizar transa\u00e7\u00f5es.</p> Campo Tipo Descri\u00e7\u00e3o id SERIAL PK user_id INTEGER FK \u2192 users.id, NOT NULL name VARCHAR(100) NOT NULL type VARCHAR(20) income, expense color VARCHAR(7) Cor (hex) icon VARCHAR(50) Nome do \u00edcone parent_id INTEGER FK \u2192 categories.id (subcategorias) is_active BOOLEAN Categoria ativa? created_at TIMESTAMP NOT NULL updated_at TIMESTAMP NOT NULL <p>\u00cdndices: user_id, type, parent_id</p>"},{"location":"architecture/database/#transactions","title":"transactions","text":"<p>Transa\u00e7\u00f5es financeiras (receitas, despesas, transfer\u00eancias).</p> Campo Tipo Descri\u00e7\u00e3o id SERIAL PK user_id INTEGER FK \u2192 users.id, NOT NULL account_id INTEGER FK \u2192 accounts.id, NOT NULL category_id INTEGER FK \u2192 categories.id type VARCHAR(20) income, expense, transfer amount DECIMAL(15,2) Valor, NOT NULL description TEXT Descri\u00e7\u00e3o date TIMESTAMP Data da transa\u00e7\u00e3o, NOT NULL status VARCHAR(20) pending, completed, cancelled to_account_id INTEGER FK \u2192 accounts.id (para transfers) tags VARCHAR(255) Tags separadas por v\u00edrgula notes TEXT Notas adicionais created_at TIMESTAMP NOT NULL updated_at TIMESTAMP NOT NULL <p>\u00cdndices: user_id, account_id, category_id, date, type, status</p>"},{"location":"architecture/database/#budgets","title":"budgets","text":"<p>Or\u00e7amentos planejados por categoria.</p> Campo Tipo Descri\u00e7\u00e3o id SERIAL PK user_id INTEGER FK \u2192 users.id, NOT NULL category_id INTEGER FK \u2192 categories.id, NOT NULL name VARCHAR(100) NOT NULL amount DECIMAL(15,2) Valor planejado, NOT NULL spent DECIMAL(15,2) Valor gasto (calculado) period VARCHAR(20) monthly, quarterly, yearly, custom start_date TIMESTAMP Data in\u00edcio, NOT NULL end_date TIMESTAMP Data fim, NOT NULL alert_at DECIMAL(5,2) % para alerta (ex: 80.0) is_active BOOLEAN Or\u00e7amento ativo? description TEXT Descri\u00e7\u00e3o created_at TIMESTAMP NOT NULL updated_at TIMESTAMP NOT NULL <p>\u00cdndices: user_id, category_id, start_date, end_date, is_active</p>"},{"location":"architecture/database/#migrations","title":"Migrations","text":"<p>O GORM AutoMigrate cria as tabelas automaticamente no startup:</p> <pre><code>var entities []interface{}\nentities = append(entities, auth.Entities()...)\nentities = append(entities, budget.Entities()...)\n\nif err := database.AutoMigrate(entities...); err != nil {\n    logger.Fatal().Err(err).Msg(\"failed to migrate database\")\n}\n</code></pre>"},{"location":"architecture/database/#seed-data","title":"Seed Data","text":""},{"location":"architecture/database/#auth-module","title":"Auth Module","text":"<p>Cria automaticamente:</p> <ol> <li>Permissions: Permiss\u00f5es b\u00e1sicas para cada recurso</li> <li>Roles: admin e user</li> <li>Root User: username=root, password=root123</li> <li>Atribui role admin ao root</li> </ol>"},{"location":"architecture/database/#budget-module","title":"Budget Module","text":"<p>Cria categorias padr\u00e3o para o usu\u00e1rio root:</p> <ul> <li>Receitas: Sal\u00e1rio, Freelance, Investimentos</li> <li>Despesas: Alimenta\u00e7\u00e3o, Transporte, Moradia, Sa\u00fade, Lazer, Educa\u00e7\u00e3o</li> </ul>"},{"location":"architecture/database/#relacionamentos","title":"Relacionamentos","text":"<pre><code>-- User \u2192 Accounts (1:N)\naccounts.user_id \u2192 users.id\n\n-- User \u2192 Categories (1:N)\ncategories.user_id \u2192 users.id\n\n-- User \u2192 Transactions (1:N)\ntransactions.user_id \u2192 users.id\n\n-- Account \u2192 Transactions (1:N)\ntransactions.account_id \u2192 accounts.id\n\n-- Category \u2192 Transactions (1:N)\ntransactions.category_id \u2192 categories.id\n\n-- Category \u2192 Budgets (1:N)\nbudgets.category_id \u2192 categories.id\n\n-- User \u2192 Budgets (1:N)\nbudgets.user_id \u2192 users.id\n</code></pre>"},{"location":"architecture/database/#consultas-comuns","title":"Consultas Comuns","text":""},{"location":"architecture/database/#saldo-de-uma-conta","title":"Saldo de uma Conta","text":"<pre><code>SELECT balance FROM accounts WHERE id = ? AND user_id = ?;\n</code></pre>"},{"location":"architecture/database/#transacoes-do-mes","title":"Transa\u00e7\u00f5es do M\u00eas","text":"<pre><code>SELECT * FROM transactions \nWHERE user_id = ? \n  AND EXTRACT(MONTH FROM date) = ? \n  AND EXTRACT(YEAR FROM date) = ?\nORDER BY date DESC;\n</code></pre>"},{"location":"architecture/database/#gastos-por-categoria","title":"Gastos por Categoria","text":"<pre><code>SELECT c.name, SUM(t.amount) as total\nFROM transactions t\nJOIN categories c ON t.category_id = c.id\nWHERE t.user_id = ? \n  AND t.type = 'expense'\n  AND t.status = 'completed'\nGROUP BY c.name\nORDER BY total DESC;\n</code></pre>"},{"location":"architecture/database/#verificar-orcamento","title":"Verificar Or\u00e7amento","text":"<pre><code>SELECT \n  b.name,\n  b.amount as planned,\n  b.spent,\n  (b.spent / b.amount * 100) as percent_used\nFROM budgets b\nWHERE b.user_id = ? \n  AND b.is_active = true\n  AND CURRENT_DATE BETWEEN b.start_date AND b.end_date;\n</code></pre>"},{"location":"architecture/database/#proximos-passos","title":"Pr\u00f3ximos Passos","text":"<ul> <li>Explore os M\u00f3dulos</li> <li>Veja a API Reference</li> <li>Aprenda sobre Desenvolvimento</li> </ul>"},{"location":"architecture/modules/","title":"M\u00f3dulos","text":"<p>O Monetics \u00e9 organizado em m\u00f3dulos independentes, cada um respons\u00e1vel por um dom\u00ednio espec\u00edfico do neg\u00f3cio.</p>"},{"location":"architecture/modules/#estrutura-de-um-modulo","title":"Estrutura de um M\u00f3dulo","text":"<p>Cada m\u00f3dulo segue a mesma estrutura padr\u00e3o:</p> <pre><code>module/\n\u251c\u2500\u2500 domain/              # Entidades e regras de neg\u00f3cio\n\u2502   \u251c\u2500\u2500 entity.go\n\u2502   \u2514\u2500\u2500 value_objects.go\n\u251c\u2500\u2500 usecase/            # Casos de uso\n\u2502   \u251c\u2500\u2500 interfaces/     # Interfaces de repositories\n\u2502   \u2514\u2500\u2500 create_*.go\n\u251c\u2500\u2500 adapters/           # Adaptadores\n\u2502   \u251c\u2500\u2500 http/          # Handlers HTTP\n\u2502   \u2502   \u251c\u2500\u2500 handlers/\n\u2502   \u2502   \u251c\u2500\u2500 dto/\n\u2502   \u2502   \u2514\u2500\u2500 middleware.go\n\u2502   \u2514\u2500\u2500 repository/    # Implementa\u00e7\u00f5es de persist\u00eancia\n\u2502       \u251c\u2500\u2500 gorm/\n\u2502       \u2514\u2500\u2500 mappers/\n\u251c\u2500\u2500 service/           # Servi\u00e7os auxiliares\n\u251c\u2500\u2500 errors/            # Erros espec\u00edficos do m\u00f3dulo\n\u251c\u2500\u2500 entities.go        # Export de entidades para migrations\n\u251c\u2500\u2500 module.go          # WireUp do m\u00f3dulo\n\u2514\u2500\u2500 seed.go           # Dados iniciais\n</code></pre>"},{"location":"architecture/modules/#modulo-auth","title":"M\u00f3dulo Auth","text":"<p>Respons\u00e1vel por autentica\u00e7\u00e3o e autoriza\u00e7\u00e3o.</p>"},{"location":"architecture/modules/#entidades","title":"Entidades","text":"<ul> <li>User: Usu\u00e1rios do sistema</li> <li>Role: Pap\u00e9is (admin, user, etc)</li> <li>Permission: Permiss\u00f5es granulares</li> <li>AuditLog: Log de auditoria</li> </ul>"},{"location":"architecture/modules/#use-cases","title":"Use Cases","text":"<ul> <li>Criar/Listar/Atualizar/Deletar usu\u00e1rios</li> <li>Gerenciar roles e permissions</li> <li>Login e gera\u00e7\u00e3o de JWT</li> <li>Verificar permiss\u00f5es</li> <li>Registrar auditoria</li> </ul>"},{"location":"architecture/modules/#endpoints","title":"Endpoints","text":"M\u00e9todo Endpoint Descri\u00e7\u00e3o POST <code>/v1/auth/login</code> Login POST <code>/v1/auth/users</code> Criar usu\u00e1rio GET <code>/v1/auth/users</code> Listar usu\u00e1rios GET <code>/v1/auth/users/:id</code> Buscar usu\u00e1rio PUT <code>/v1/auth/users/:id</code> Atualizar usu\u00e1rio DELETE <code>/v1/auth/users/:id</code> Deletar usu\u00e1rio GET <code>/v1/auth/roles</code> Listar roles POST <code>/v1/auth/roles</code> Criar role GET <code>/v1/auth/permissions</code> Listar permissions"},{"location":"architecture/modules/#servicos","title":"Servi\u00e7os","text":"<ul> <li>JWTService: Gera\u00e7\u00e3o e valida\u00e7\u00e3o de tokens</li> <li>PasswordService: Hash e verifica\u00e7\u00e3o de senhas (bcrypt)</li> <li>AuditService: Registro de a\u00e7\u00f5es</li> </ul>"},{"location":"architecture/modules/#middleware","title":"Middleware","text":"<ul> <li>AuthMiddleware: Valida JWT</li> <li>PermissionMiddleware: Verifica permiss\u00f5es</li> </ul>"},{"location":"architecture/modules/#modulo-budget","title":"M\u00f3dulo Budget","text":"<p>Respons\u00e1vel pela gest\u00e3o financeira.</p>"},{"location":"architecture/modules/#entidades_1","title":"Entidades","text":"<ul> <li>Account: Contas banc\u00e1rias</li> <li>Category: Categorias de transa\u00e7\u00f5es</li> <li>Transaction: Transa\u00e7\u00f5es financeiras</li> <li>Budget: Or\u00e7amentos planejados</li> </ul>"},{"location":"architecture/modules/#use-cases_1","title":"Use Cases","text":"<ul> <li>CRUD de contas</li> <li>CRUD de categorias</li> <li>CRUD de transa\u00e7\u00f5es</li> <li>CRUD de or\u00e7amentos</li> <li>Calcular saldo de conta</li> <li>Gerar relat\u00f3rios mensais</li> </ul>"},{"location":"architecture/modules/#endpoints_1","title":"Endpoints","text":"M\u00e9todo Endpoint Descri\u00e7\u00e3o POST <code>/v1/budget/accounts</code> Criar conta GET <code>/v1/budget/accounts</code> Listar contas GET <code>/v1/budget/accounts/:id/balance</code> Saldo da conta POST <code>/v1/budget/categories</code> Criar categoria GET <code>/v1/budget/categories</code> Listar categorias POST <code>/v1/budget/transactions</code> Criar transa\u00e7\u00e3o GET <code>/v1/budget/transactions</code> Listar transa\u00e7\u00f5es POST <code>/v1/budget/budgets</code> Criar or\u00e7amento GET <code>/v1/budget/budgets</code> Listar or\u00e7amentos GET <code>/v1/budget/reports/monthly</code> Relat\u00f3rio mensal"},{"location":"architecture/modules/#tipos-de-transacoes","title":"Tipos de Transa\u00e7\u00f5es","text":"<pre><code>const (\n    TransactionTypeIncome   = \"income\"    // Receita\n    TransactionTypeExpense  = \"expense\"   // Despesa\n    TransactionTypeTransfer = \"transfer\"  // Transfer\u00eancia\n)\n</code></pre>"},{"location":"architecture/modules/#tipos-de-categorias","title":"Tipos de Categorias","text":"<pre><code>const (\n    CategoryTypeIncome  = \"income\"   // Receita\n    CategoryTypeExpense = \"expense\"  // Despesa\n)\n</code></pre>"},{"location":"architecture/modules/#periodos-de-orcamento","title":"Per\u00edodos de Or\u00e7amento","text":"<pre><code>const (\n    BudgetPeriodMonthly   = \"monthly\"    // Mensal\n    BudgetPeriodQuarterly = \"quarterly\"  // Trimestral\n    BudgetPeriodYearly    = \"yearly\"     // Anual\n    BudgetPeriodCustom    = \"custom\"     // Personalizado\n)\n</code></pre>"},{"location":"architecture/modules/#integracao-entre-modulos","title":"Integra\u00e7\u00e3o entre M\u00f3dulos","text":""},{"location":"architecture/modules/#auth-budget","title":"Auth \u2192 Budget","text":"<p>O m\u00f3dulo Budget depende do Auth para:</p> <ul> <li>Autentica\u00e7\u00e3o via JWT</li> <li>Identifica\u00e7\u00e3o do usu\u00e1rio (UserID)</li> <li>Controle de acesso</li> </ul> <p>Todas as rotas do Budget exigem autentica\u00e7\u00e3o.</p>"},{"location":"architecture/modules/#isolamento","title":"Isolamento","text":"<p>Cada m\u00f3dulo:</p> <ul> <li>Tem suas pr\u00f3prias entidades</li> <li>Define suas pr\u00f3prias interfaces</li> <li>N\u00e3o depende diretamente de outros m\u00f3dulos</li> <li>Comunica-se via contratos bem definidos</li> </ul>"},{"location":"architecture/modules/#adicionar-um-novo-modulo","title":"Adicionar um Novo M\u00f3dulo","text":"<p>Para adicionar um novo m\u00f3dulo:</p> <ol> <li>Crie a estrutura de diret\u00f3rios</li> <li>Defina as entidades de dom\u00ednio</li> <li>Implemente os use cases</li> <li>Crie handlers e repositories</li> <li>Implemente <code>module.go</code> com fun\u00e7\u00e3o <code>WireUp</code></li> <li>Registre em <code>internal/applications/api/app.go</code></li> </ol> <p>Exemplo de <code>module.go</code>:</p> <pre><code>func WireUp(group *echo.Group, db *gorm.DB, jwtSecret string, logger logger.Logger) {\n    // Inicializar repositories\n    repo := repository.NewRepository(db)\n\n    // Inicializar use cases\n    useCase := usecase.NewUseCase(repo)\n\n    // Inicializar handlers\n    handler := handler.NewHandler(useCase)\n\n    // Registrar rotas\n    module := group.Group(\"/module\")\n    module.POST(\"\", handler.Create)\n    module.GET(\"\", handler.List)\n}\n</code></pre>"},{"location":"architecture/modules/#proximos-passos","title":"Pr\u00f3ximos Passos","text":"<ul> <li>Veja o Schema do Banco</li> <li>Explore a API do Auth</li> <li>Explore a API do Budget</li> </ul>"},{"location":"architecture/overview/","title":"Vis\u00e3o Geral da Arquitetura","text":"<p>O Monetics segue os princ\u00edpios de Clean Architecture e Domain-Driven Design (DDD), garantindo separa\u00e7\u00e3o de responsabilidades e facilidade de manuten\u00e7\u00e3o.</p>"},{"location":"architecture/overview/#principios-arquiteturais","title":"Princ\u00edpios Arquiteturais","text":""},{"location":"architecture/overview/#1-independencia-de-frameworks","title":"1. Independ\u00eancia de Frameworks","text":"<p>O core da aplica\u00e7\u00e3o n\u00e3o depende de frameworks espec\u00edficos. Echo, GORM e outras bibliotecas s\u00e3o apenas detalhes de implementa\u00e7\u00e3o que podem ser substitu\u00eddos.</p>"},{"location":"architecture/overview/#2-testabilidade","title":"2. Testabilidade","text":"<p>A separa\u00e7\u00e3o em camadas permite testar a l\u00f3gica de neg\u00f3cio sem depender de infraestrutura (banco de dados, HTTP, etc).</p>"},{"location":"architecture/overview/#3-independencia-de-ui","title":"3. Independ\u00eancia de UI","text":"<p>A API \u00e9 independente de interfaces. Poderia ser consumida por web, mobile, CLI, etc.</p>"},{"location":"architecture/overview/#4-independencia-de-banco-de-dados","title":"4. Independ\u00eancia de Banco de Dados","text":"<p>O dom\u00ednio n\u00e3o conhece o banco de dados. Repositories abstraem a persist\u00eancia.</p>"},{"location":"architecture/overview/#camadas-da-aplicacao","title":"Camadas da Aplica\u00e7\u00e3o","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502          HTTP Handlers (Echo)           \u2502\n\u2502         (Adapters/Interface)            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                  \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502            Use Cases                    \u2502\n\u2502       (Application Business Rules)      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                  \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502            Domain Entities              \u2502\n\u2502       (Enterprise Business Rules)       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                  \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502          Repositories (GORM)            \u2502\n\u2502         (Adapters/Database)             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"architecture/overview/#domain-entities","title":"Domain (Entities)","text":"<p>Camada mais interna, cont\u00e9m:</p> <ul> <li>Entidades de neg\u00f3cio puras</li> <li>Regras de neg\u00f3cio empresariais</li> <li>Independente de qualquer framework</li> </ul> <p>Exemplo: <code>User</code>, <code>Transaction</code>, <code>Budget</code></p> <pre><code>type Transaction struct {\n    ID          uint\n    UserID      uint\n    AccountID   uint\n    CategoryID  uint\n    Type        TransactionType\n    Amount      float64\n    Description string\n    Date        time.Time\n    Status      TransactionStatus\n}\n</code></pre>"},{"location":"architecture/overview/#use-cases","title":"Use Cases","text":"<p>Camada de aplica\u00e7\u00e3o, cont\u00e9m:</p> <ul> <li>Casos de uso espec\u00edficos do sistema</li> <li>Orquestra\u00e7\u00e3o de entidades</li> <li>Regras de neg\u00f3cio da aplica\u00e7\u00e3o</li> </ul> <p>Exemplo: <code>CreateTransaction</code>, <code>GetMonthlyReport</code></p> <pre><code>type CreateTransactionUseCase struct {\n    transactionRepo TransactionRepository\n    accountRepo     AccountRepository\n}\n\nfunc (uc *CreateTransactionUseCase) Execute(input CreateTransactionInput) error {\n    // Valida\u00e7\u00f5es\n    // Regras de neg\u00f3cio\n    // Persist\u00eancia via repository\n}\n</code></pre>"},{"location":"architecture/overview/#adapters","title":"Adapters","text":"<p>Camada de adaptadores, cont\u00e9m:</p> <ul> <li>HTTP Handlers: Controladores REST (Echo)</li> <li>Repositories: Implementa\u00e7\u00f5es de persist\u00eancia (GORM)</li> <li>DTOs: Data Transfer Objects</li> </ul> <p>Exemplo: Handler HTTP</p> <pre><code>func (h *TransactionHandler) Create(c echo.Context) error {\n    var dto CreateTransactionDTO\n    if err := c.Bind(&amp;dto); err != nil {\n        return err\n    }\n\n    result, err := h.useCase.Execute(dto)\n    return c.JSON(http.StatusCreated, result)\n}\n</code></pre>"},{"location":"architecture/overview/#infrastructure","title":"Infrastructure","text":"<p>Camada mais externa, cont\u00e9m:</p> <ul> <li>Configura\u00e7\u00e3o de banco de dados</li> <li>Logger</li> <li>Validadores</li> <li>Frameworks</li> </ul>"},{"location":"architecture/overview/#estrutura-de-diretorios","title":"Estrutura de Diret\u00f3rios","text":"<pre><code>monetics/\n\u251c\u2500\u2500 cmd/                    # Entrypoints\n\u2502   \u2514\u2500\u2500 api/\n\u2502       \u2514\u2500\u2500 main.go\n\u251c\u2500\u2500 internal/              # C\u00f3digo da aplica\u00e7\u00e3o\n\u2502   \u251c\u2500\u2500 applications/      # Configura\u00e7\u00e3o da app\n\u2502   \u251c\u2500\u2500 config/           # Gerenciamento de configs\n\u2502   \u251c\u2500\u2500 infra/            # Infraestrutura\n\u2502   \u2502   \u251c\u2500\u2500 db/\n\u2502   \u2502   \u2514\u2500\u2500 validator/\n\u2502   \u2514\u2500\u2500 modules/          # M\u00f3dulos de dom\u00ednio\n\u2502       \u251c\u2500\u2500 auth/         # Autentica\u00e7\u00e3o\n\u2502       \u2502   \u251c\u2500\u2500 domain/          # Entidades\n\u2502       \u2502   \u251c\u2500\u2500 usecase/         # Casos de uso\n\u2502       \u2502   \u2514\u2500\u2500 adapters/        # HTTP &amp; Repos\n\u2502       \u2514\u2500\u2500 budget/       # Gest\u00e3o financeira\n\u2502           \u251c\u2500\u2500 domain/\n\u2502           \u251c\u2500\u2500 usecase/\n\u2502           \u2514\u2500\u2500 adapters/\n\u2514\u2500\u2500 pkg/                  # Pacotes compartilhados\n    \u251c\u2500\u2500 logger/\n    \u2514\u2500\u2500 responses/\n</code></pre>"},{"location":"architecture/overview/#fluxo-de-dados","title":"Fluxo de Dados","text":"<ol> <li>Request HTTP chega no Handler (Echo)</li> <li>Handler valida e converte para DTO</li> <li>Use Case recebe DTO e executa l\u00f3gica</li> <li>Domain aplica regras de neg\u00f3cio</li> <li>Repository persiste dados (GORM)</li> <li>Response retorna pelo Handler</li> </ol>"},{"location":"architecture/overview/#vantagens-desta-arquitetura","title":"Vantagens desta Arquitetura","text":"<p>\u2705 Testabilidade: Cada camada pode ser testada isoladamente \u2705 Manutenibilidade: Mudan\u00e7as em uma camada n\u00e3o afetam outras \u2705 Flexibilidade: F\u00e1cil trocar frameworks ou banco de dados \u2705 Escalabilidade: M\u00f3dulos podem virar microsservi\u00e7os \u2705 Clareza: C\u00f3digo organizado e f\u00e1cil de entender  </p>"},{"location":"architecture/overview/#proximos-passos","title":"Pr\u00f3ximos Passos","text":"<ul> <li>Entenda os M\u00f3dulos do sistema</li> <li>Veja o Schema do Banco de Dados</li> <li>Explore a API Reference</li> </ul>"},{"location":"getting-started/configuration/","title":"Configura\u00e7\u00e3o","text":"<p>O Monetics utiliza o Viper para gerenciamento de configura\u00e7\u00f5es, suportando m\u00faltiplos formatos e vari\u00e1veis de ambiente.</p>"},{"location":"getting-started/configuration/#arquivos-de-configuracao","title":"Arquivos de Configura\u00e7\u00e3o","text":"<p>O projeto vem com tr\u00eas arquivos de configura\u00e7\u00e3o:</p> <ul> <li><code>config.yaml</code> - Configura\u00e7\u00e3o base</li> <li><code>config.dev.yaml</code> - Configura\u00e7\u00f5es de desenvolvimento</li> <li><code>config.prod.yaml</code> - Configura\u00e7\u00f5es de produ\u00e7\u00e3o</li> </ul>"},{"location":"getting-started/configuration/#estrutura-de-configuracao","title":"Estrutura de Configura\u00e7\u00e3o","text":""},{"location":"getting-started/configuration/#aplicacao","title":"Aplica\u00e7\u00e3o","text":"<pre><code>app:\n  name: monetics\n  port: 8080\n  env: development\n</code></pre> Campo Tipo Descri\u00e7\u00e3o <code>name</code> string Nome da aplica\u00e7\u00e3o <code>port</code> int Porta HTTP <code>env</code> string Ambiente (development, production)"},{"location":"getting-started/configuration/#banco-de-dados","title":"Banco de Dados","text":"<pre><code>database:\n  host: localhost\n  port: 5432\n  user: postgres\n  password: postgres\n  name: monetics\n  sslmode: disable\n  max_connections: 100\n  max_idle_connections: 10\n  connection_max_lifetime: 3600\n</code></pre> Campo Tipo Descri\u00e7\u00e3o <code>host</code> string Host do PostgreSQL <code>port</code> int Porta do PostgreSQL <code>user</code> string Usu\u00e1rio do banco <code>password</code> string Senha do banco <code>name</code> string Nome do banco <code>sslmode</code> string Modo SSL (disable, require) <code>max_connections</code> int M\u00e1ximo de conex\u00f5es <code>max_idle_connections</code> int Conex\u00f5es idle <code>connection_max_lifetime</code> int Tempo de vida (segundos)"},{"location":"getting-started/configuration/#jwt","title":"JWT","text":"<pre><code>jwt:\n  secret: your-secret-key-change-in-production\n  expiration: 24h\n</code></pre> Campo Tipo Descri\u00e7\u00e3o <code>secret</code> string Chave secreta para assinar tokens <code>expiration</code> duration Tempo de expira\u00e7\u00e3o do token <p>Seguran\u00e7a</p> <p>NUNCA commite o <code>jwt.secret</code> em produ\u00e7\u00e3o! Use vari\u00e1veis de ambiente.</p>"},{"location":"getting-started/configuration/#logger","title":"Logger","text":"<pre><code>logger:\n  level: info\n  format: json\n</code></pre> Campo Tipo Descri\u00e7\u00e3o <code>level</code> string N\u00edvel de log (debug, info, warn, error) <code>format</code> string Formato (json, console)"},{"location":"getting-started/configuration/#variaveis-de-ambiente","title":"Vari\u00e1veis de Ambiente","text":"<p>Todas as configura\u00e7\u00f5es podem ser sobrescritas por vari\u00e1veis de ambiente usando o prefixo <code>MONETICS_</code>:</p> <pre><code>export MONETICS_APP_PORT=9090\nexport MONETICS_DATABASE_HOST=db.example.com\nexport MONETICS_DATABASE_PASSWORD=secret\nexport MONETICS_JWT_SECRET=super-secret-key\nexport MONETICS_LOGGER_LEVEL=debug\n</code></pre>"},{"location":"getting-started/configuration/#configuracao-docker","title":"Configura\u00e7\u00e3o Docker","text":"<p>No <code>docker-compose.yml</code>, as vari\u00e1veis s\u00e3o definidas:</p> <pre><code>environment:\n  - MONETICS_DATABASE_HOST=postgres\n  - MONETICS_DATABASE_PORT=5432\n  - MONETICS_DATABASE_USER=postgres\n  - MONETICS_DATABASE_PASSWORD=postgres\n  - MONETICS_DATABASE_NAME=monetics\n  - MONETICS_JWT_SECRET=change-this-secret-in-production\n</code></pre>"},{"location":"getting-started/configuration/#boas-praticas","title":"Boas Pr\u00e1ticas","text":"<ol> <li>Desenvolvimento: Use <code>config.dev.yaml</code> com valores de teste</li> <li>Produ\u00e7\u00e3o: Use vari\u00e1veis de ambiente para valores sens\u00edveis</li> <li>Secrets: Nunca commite senhas ou chaves em arquivos de configura\u00e7\u00e3o</li> <li>Valida\u00e7\u00e3o: O Monetics valida todas as configura\u00e7\u00f5es no startup</li> </ol>"},{"location":"getting-started/configuration/#exemplo-completo","title":"Exemplo Completo","text":"<pre><code>app:\n  name: monetics\n  port: 8080\n  env: production\n\ndatabase:\n  host: db.prod.example.com\n  port: 5432\n  user: monetics_user\n  password: ${DB_PASSWORD}  # Use vari\u00e1vel de ambiente\n  name: monetics_prod\n  sslmode: require\n  max_connections: 50\n  max_idle_connections: 5\n  connection_max_lifetime: 1800\n\njwt:\n  secret: ${JWT_SECRET}  # Use vari\u00e1vel de ambiente\n  expiration: 8h\n\nlogger:\n  level: info\n  format: json\n</code></pre>"},{"location":"getting-started/configuration/#proximos-passos","title":"Pr\u00f3ximos Passos","text":"<ul> <li>Aprenda a usar a API em Primeiro Uso</li> <li>Entenda a arquitetura em Vis\u00e3o Geral</li> </ul>"},{"location":"getting-started/installation/","title":"Instala\u00e7\u00e3o","text":"<p>Este guia mostra como instalar e executar o Monetics em diferentes ambientes.</p>"},{"location":"getting-started/installation/#pre-requisitos","title":"Pr\u00e9-requisitos","text":"<p>Antes de come\u00e7ar, certifique-se de ter instalado:</p> <ul> <li>Go 1.25.1+ - Download</li> <li>Docker e Docker Compose - Download</li> <li>Make - Geralmente j\u00e1 instalado em sistemas Unix</li> <li>PostgreSQL 14+ - Necess\u00e1rio se n\u00e3o usar Docker</li> </ul>"},{"location":"getting-started/installation/#instalacao-com-docker-compose","title":"Instala\u00e7\u00e3o com Docker Compose","text":"<p>A forma mais r\u00e1pida de executar o Monetics \u00e9 usando Docker Compose:</p> <pre><code># Clone o reposit\u00f3rio\ngit clone https://github.com/alpheres/monetics.git\ncd monetics\n\n# Suba os containers\ndocker-compose up -d\n\n# Verifique se est\u00e1 funcionando\ncurl http://localhost:8080/health\n</code></pre> <p>A API estar\u00e1 dispon\u00edvel em <code>http://localhost:8080</code>.</p>"},{"location":"getting-started/installation/#instalacao-local","title":"Instala\u00e7\u00e3o Local","text":""},{"location":"getting-started/installation/#1-clone-o-repositorio","title":"1. Clone o Reposit\u00f3rio","text":"<pre><code>git clone https://github.com/alpheres/monetics.git\ncd monetics\n</code></pre>"},{"location":"getting-started/installation/#2-instale-as-dependencias","title":"2. Instale as Depend\u00eancias","text":"<pre><code>go mod download\n</code></pre>"},{"location":"getting-started/installation/#3-configure-o-banco-de-dados","title":"3. Configure o Banco de Dados","text":"<p>Certifique-se de ter um PostgreSQL rodando e configure as credenciais no arquivo <code>config.yaml</code>:</p> <pre><code>database:\n  host: localhost\n  port: 5432\n  user: postgres\n  password: postgres\n  name: monetics\n  sslmode: disable\n</code></pre>"},{"location":"getting-started/installation/#4-execute-a-aplicacao","title":"4. Execute a Aplica\u00e7\u00e3o","text":"<pre><code># Usando Make\nmake run\n\n# Ou compilando primeiro\nmake build\n./bin/monetics\n</code></pre>"},{"location":"getting-started/installation/#verificacao-da-instalacao","title":"Verifica\u00e7\u00e3o da Instala\u00e7\u00e3o","text":"<p>Ap\u00f3s iniciar a aplica\u00e7\u00e3o, voc\u00ea pode verificar se tudo est\u00e1 funcionando:</p> <pre><code># Health check\ncurl http://localhost:8080/health\n\n# Swagger UI\nopen http://localhost:8080/swagger/index.html\n</code></pre>"},{"location":"getting-started/installation/#credenciais-padrao","title":"Credenciais Padr\u00e3o","text":"<p>Um usu\u00e1rio root \u00e9 criado automaticamente no primeiro start:</p> <ul> <li>Username: <code>root</code></li> <li>Password: <code>root123</code></li> </ul> <p>Produ\u00e7\u00e3o</p> <p>Lembre-se de alterar as credenciais padr\u00e3o em ambientes de produ\u00e7\u00e3o!</p>"},{"location":"getting-started/installation/#proximos-passos","title":"Pr\u00f3ximos Passos","text":"<ul> <li>Configure as vari\u00e1veis de ambiente em Configura\u00e7\u00e3o</li> <li>Aprenda a usar a API em Primeiro Uso</li> <li>Explore os endpoints na API Reference</li> </ul>"},{"location":"getting-started/quickstart/","title":"Primeiro Uso","text":"<p>Este guia r\u00e1pido mostra como fazer suas primeiras chamadas \u00e0 API do Monetics.</p>"},{"location":"getting-started/quickstart/#1-autenticacao","title":"1. Autentica\u00e7\u00e3o","text":"<p>Primeiro, fa\u00e7a login com o usu\u00e1rio root padr\u00e3o:</p> <pre><code>curl -X POST http://localhost:8080/v1/auth/login \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"username\": \"root\",\n    \"password\": \"root123\"\n  }'\n</code></pre> <p>Resposta:</p> <pre><code>{\n  \"success\": true,\n  \"data\": {\n    \"token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\",\n    \"user\": {\n      \"id\": 1,\n      \"username\": \"root\",\n      \"roles\": [\"admin\"]\n    }\n  }\n}\n</code></pre> <p>Salve o token JWT retornado para usar nas pr\u00f3ximas requisi\u00e7\u00f5es.</p>"},{"location":"getting-started/quickstart/#2-criar-uma-conta","title":"2. Criar uma Conta","text":"<p>Crie sua primeira conta banc\u00e1ria:</p> <pre><code>curl -X POST http://localhost:8080/v1/budget/accounts \\\n  -H \"Content-Type: application/json\" \\\n  -H \"Authorization: Bearer SEU_TOKEN_AQUI\" \\\n  -d '{\n    \"name\": \"Conta Corrente\",\n    \"type\": \"checking\",\n    \"balance\": 5000.00,\n    \"currency\": \"BRL\",\n    \"is_active\": true\n  }'\n</code></pre>"},{"location":"getting-started/quickstart/#3-criar-categorias","title":"3. Criar Categorias","text":"<p>Crie categorias para organizar suas transa\u00e7\u00f5es:</p> <pre><code># Categoria de Alimenta\u00e7\u00e3o\ncurl -X POST http://localhost:8080/v1/budget/categories \\\n  -H \"Content-Type: application/json\" \\\n  -H \"Authorization: Bearer SEU_TOKEN_AQUI\" \\\n  -d '{\n    \"name\": \"Alimenta\u00e7\u00e3o\",\n    \"type\": \"expense\",\n    \"color\": \"#FF5722\",\n    \"icon\": \"restaurant\"\n  }'\n\n# Categoria de Sal\u00e1rio\ncurl -X POST http://localhost:8080/v1/budget/categories \\\n  -H \"Content-Type: application/json\" \\\n  -H \"Authorization: Bearer SEU_TOKEN_AQUI\" \\\n  -d '{\n    \"name\": \"Sal\u00e1rio\",\n    \"type\": \"income\",\n    \"color\": \"#4CAF50\",\n    \"icon\": \"work\"\n  }'\n</code></pre>"},{"location":"getting-started/quickstart/#4-registrar-transacoes","title":"4. Registrar Transa\u00e7\u00f5es","text":""},{"location":"getting-started/quickstart/#receita-salario","title":"Receita (Sal\u00e1rio)","text":"<pre><code>curl -X POST http://localhost:8080/v1/budget/transactions \\\n  -H \"Content-Type: application/json\" \\\n  -H \"Authorization: Bearer SEU_TOKEN_AQUI\" \\\n  -d '{\n    \"account_id\": 1,\n    \"category_id\": 2,\n    \"type\": \"income\",\n    \"amount\": 5000.00,\n    \"description\": \"Sal\u00e1rio Novembro\",\n    \"date\": \"2025-11-25T00:00:00Z\",\n    \"status\": \"completed\"\n  }'\n</code></pre>"},{"location":"getting-started/quickstart/#despesa-supermercado","title":"Despesa (Supermercado)","text":"<pre><code>curl -X POST http://localhost:8080/v1/budget/transactions \\\n  -H \"Content-Type: application/json\" \\\n  -H \"Authorization: Bearer SEU_TOKEN_AQUI\" \\\n  -d '{\n    \"account_id\": 1,\n    \"category_id\": 1,\n    \"type\": \"expense\",\n    \"amount\": 350.00,\n    \"description\": \"Supermercado\",\n    \"date\": \"2025-11-25T00:00:00Z\",\n    \"status\": \"completed\"\n  }'\n</code></pre>"},{"location":"getting-started/quickstart/#5-criar-um-orcamento","title":"5. Criar um Or\u00e7amento","text":"<p>Defina um limite mensal para alimenta\u00e7\u00e3o:</p> <pre><code>curl -X POST http://localhost:8080/v1/budget/budgets \\\n  -H \"Content-Type: application/json\" \\\n  -H \"Authorization: Bearer SEU_TOKEN_AQUI\" \\\n  -d '{\n    \"category_id\": 1,\n    \"name\": \"Or\u00e7amento Alimenta\u00e7\u00e3o Novembro\",\n    \"amount\": 1500.00,\n    \"period\": \"monthly\",\n    \"start_date\": \"2025-11-01T00:00:00Z\",\n    \"end_date\": \"2025-11-30T23:59:59Z\",\n    \"alert_at\": 80.0,\n    \"is_active\": true\n  }'\n</code></pre>"},{"location":"getting-started/quickstart/#6-consultar-saldo-da-conta","title":"6. Consultar Saldo da Conta","text":"<pre><code>curl -X GET http://localhost:8080/v1/budget/accounts/1/balance \\\n  -H \"Authorization: Bearer SEU_TOKEN_AQUI\"\n</code></pre>"},{"location":"getting-started/quickstart/#7-ver-relatorio-mensal","title":"7. Ver Relat\u00f3rio Mensal","text":"<p>Obtenha um resumo dos seus gastos:</p> <pre><code>curl -X GET \"http://localhost:8080/v1/budget/reports/monthly?month=11&amp;year=2025\" \\\n  -H \"Authorization: Bearer SEU_TOKEN_AQUI\"\n</code></pre>"},{"location":"getting-started/quickstart/#swagger-ui","title":"Swagger UI","text":"<p>Para uma experi\u00eancia interativa, acesse o Swagger UI:</p> <pre><code>http://localhost:8080/swagger/index.html\n</code></pre> <p>L\u00e1 voc\u00ea pode:</p> <ul> <li>Ver todos os endpoints dispon\u00edveis</li> <li>Testar as APIs diretamente no navegador</li> <li>Ver exemplos de request/response</li> <li>Entender os modelos de dados</li> </ul>"},{"location":"getting-started/quickstart/#proximos-passos","title":"Pr\u00f3ximos Passos","text":"<ul> <li>Explore todos os endpoints na API Reference</li> <li>Entenda a arquitetura em Vis\u00e3o Geral</li> <li>Configure or\u00e7amentos avan\u00e7ados consultando a documenta\u00e7\u00e3o da API</li> </ul>"},{"location":"guides/development/","title":"Guia de Desenvolvimento","text":"<p>Este guia fornece informa\u00e7\u00f5es para desenvolvedores que desejam contribuir ou estender o Monetics.</p>"},{"location":"guides/development/#configurando-o-ambiente","title":"Configurando o Ambiente","text":""},{"location":"guides/development/#1-clone-e-configure","title":"1. Clone e Configure","text":"<pre><code>git clone https://github.com/alpheres/monetics.git\ncd monetics\ngo mod download\n</code></pre>"},{"location":"guides/development/#2-configure-o-banco-de-dados","title":"2. Configure o Banco de Dados","text":"<pre><code># Via Docker\ndocker-compose up -d postgres\n\n# Ou localmente\ncreatedb monetics\n</code></pre>"},{"location":"guides/development/#3-execute-em-modo-de-desenvolvimento","title":"3. Execute em Modo de Desenvolvimento","text":"<pre><code>make run\n</code></pre>"},{"location":"guides/development/#estrutura-do-codigo","title":"Estrutura do C\u00f3digo","text":""},{"location":"guides/development/#adicionando-um-novo-use-case","title":"Adicionando um Novo Use Case","text":"<ol> <li>Crie o arquivo em <code>internal/modules/{module}/usecase/</code></li> <li>Defina interfaces necess\u00e1rias em <code>usecase/interfaces/</code></li> <li>Implemente a l\u00f3gica de neg\u00f3cio</li> <li>Injete via WireUp</li> </ol> <p>Exemplo:</p> <pre><code>// usecase/create_something.go\npackage usecase\n\ntype CreateSomethingInput struct {\n    Name string `validate:\"required\"`\n}\n\ntype CreateSomethingUseCase struct {\n    repo SomethingRepository\n}\n\nfunc NewCreateSomethingUseCase(repo SomethingRepository) *CreateSomethingUseCase {\n    return &amp;CreateSomethingUseCase{repo: repo}\n}\n\nfunc (uc *CreateSomethingUseCase) Execute(input CreateSomethingInput) error {\n    // Valida\u00e7\u00e3o\n    // L\u00f3gica de neg\u00f3cio\n    // Persist\u00eancia\n    return uc.repo.Create(something)\n}\n</code></pre>"},{"location":"guides/development/#adicionando-um-novo-endpoint","title":"Adicionando um Novo Endpoint","text":"<ol> <li>Crie o handler em <code>adapters/http/handlers/</code></li> <li>Defina DTOs em <code>adapters/http/dto/</code></li> <li>Registre a rota no <code>module.go</code></li> </ol> <p>Exemplo:</p> <pre><code>// adapters/http/handlers/something_handler.go\npackage handlers\n\ntype SomethingHandler struct {\n    useCase *usecase.CreateSomethingUseCase\n}\n\n// Create godoc\n// @Summary Create something\n// @Tags something\n// @Accept json\n// @Produce json\n// @Param input body dto.CreateSomethingDTO true \"Input\"\n// @Success 201 {object} responses.SuccessResponse\n// @Router /v1/something [post]\n// @Security BearerAuth\nfunc (h *SomethingHandler) Create(c echo.Context) error {\n    var dto dto.CreateSomethingDTO\n    if err := c.Bind(&amp;dto); err != nil {\n        return responses.BadRequest(c, \"Invalid input\")\n    }\n\n    result, err := h.useCase.Execute(dto.ToInput())\n    if err != nil {\n        return responses.InternalError(c, err.Error())\n    }\n\n    return responses.Created(c, result)\n}\n</code></pre>"},{"location":"guides/development/#swagger-documentation","title":"Swagger Documentation","text":""},{"location":"guides/development/#anotacoes-swagger","title":"Anota\u00e7\u00f5es Swagger","text":"<p>Use coment\u00e1rios GoDoc com anota\u00e7\u00f5es Swag:</p> <pre><code>// @Summary Breve descri\u00e7\u00e3o\n// @Description Descri\u00e7\u00e3o detalhada\n// @Tags tag-name\n// @Accept json\n// @Produce json\n// @Param name path string true \"Description\"\n// @Param body body dto.InputDTO true \"Body\"\n// @Success 200 {object} responses.SuccessResponse\n// @Failure 400 {object} responses.ErrorResponse\n// @Router /v1/endpoint [post]\n// @Security BearerAuth\n</code></pre>"},{"location":"guides/development/#gerar-swagger","title":"Gerar Swagger","text":"<pre><code>make swagger\n</code></pre>"},{"location":"guides/development/#testes","title":"Testes","text":""},{"location":"guides/development/#estrutura-de-testes","title":"Estrutura de Testes","text":"<pre><code>module/\n\u251c\u2500\u2500 usecase/\n\u2502   \u251c\u2500\u2500 create_something.go\n\u2502   \u2514\u2500\u2500 create_something_test.go\n\u2514\u2500\u2500 adapters/\n    \u2514\u2500\u2500 repository/\n        \u251c\u2500\u2500 repository.go\n        \u2514\u2500\u2500 repository_test.go\n</code></pre>"},{"location":"guides/development/#executar-testes","title":"Executar Testes","text":"<pre><code># Todos os testes\ngo test ./...\n\n# Com coverage\ngo test -cover ./...\n\n# Teste espec\u00edfico\ngo test ./internal/modules/budget/usecase/\n</code></pre>"},{"location":"guides/development/#exemplo-de-teste","title":"Exemplo de Teste","text":"<pre><code>func TestCreateSomething(t *testing.T) {\n    // Arrange\n    mockRepo := &amp;MockRepository{}\n    useCase := NewCreateSomethingUseCase(mockRepo)\n\n    input := CreateSomethingInput{\n        Name: \"Test\",\n    }\n\n    // Act\n    err := useCase.Execute(input)\n\n    // Assert\n    assert.NoError(t, err)\n    assert.Equal(t, 1, mockRepo.CreateCallCount)\n}\n</code></pre>"},{"location":"guides/development/#migrations","title":"Migrations","text":"<p>O Monetics usa AutoMigrate do GORM. Para adicionar uma nova entidade:</p> <ol> <li>Defina a struct em <code>domain/</code></li> <li>Adicione aos <code>Entities()</code> do m\u00f3dulo</li> <li>Reinicie a aplica\u00e7\u00e3o</li> </ol> <pre><code>// module.go\nfunc Entities() []interface{} {\n    return []interface{}{\n        &amp;domain.Something{},\n    }\n}\n</code></pre>"},{"location":"guides/development/#logging","title":"Logging","text":"<p>Use o logger injetado:</p> <pre><code>logger.Info().\n    Str(\"user_id\", userID).\n    Msg(\"User created successfully\")\n\nlogger.Error().\n    Err(err).\n    Msg(\"Failed to create user\")\n</code></pre>"},{"location":"guides/development/#padroes-de-codigo","title":"Padr\u00f5es de C\u00f3digo","text":""},{"location":"guides/development/#naming-conventions","title":"Naming Conventions","text":"<ul> <li>Packages: lowercase, sem underscores</li> <li>Files: snake_case</li> <li>Types: PascalCase</li> <li>Functions: camelCase (exported) ou camelCase (private)</li> <li>Constants: PascalCase ou SCREAMING_SNAKE_CASE</li> </ul>"},{"location":"guides/development/#error-handling","title":"Error Handling","text":"<pre><code>// Retorne erros espec\u00edficos\nif err != nil {\n    return errors.New(\"failed to create user\")\n}\n\n// Use errors customizados quando necess\u00e1rio\nreturn &amp;errors.ValidationError{\n    Field: \"username\",\n    Message: \"username already exists\",\n}\n</code></pre>"},{"location":"guides/development/#response-patterns","title":"Response Patterns","text":"<p>Use o package <code>responses</code>:</p> <pre><code>responses.Success(c, data)           // 200\nresponses.Created(c, data)           // 201\nresponses.NoContent(c)               // 204\nresponses.BadRequest(c, msg)         // 400\nresponses.Unauthorized(c, msg)       // 401\nresponses.Forbidden(c, msg)          // 403\nresponses.NotFound(c, msg)           // 404\nresponses.InternalError(c, msg)      // 500\n</code></pre>"},{"location":"guides/development/#boas-praticas","title":"Boas Pr\u00e1ticas","text":"<p>\u2705 Sempre valide inputs \u2705 Use DTOs para separar API de dom\u00ednio \u2705 Retorne erros espec\u00edficos \u2705 Log eventos importantes \u2705 Escreva testes unit\u00e1rios \u2705 Documente endpoints com Swagger \u2705 Siga o padr\u00e3o arquitetural existente  </p>"},{"location":"guides/development/#contribuindo","title":"Contribuindo","text":"<ol> <li>Fork o projeto</li> <li>Crie uma branch (<code>git checkout -b feature/amazing-feature</code>)</li> <li>Commit suas mudan\u00e7as (<code>git commit -m 'Add amazing feature'</code>)</li> <li>Push para a branch (<code>git push origin feature/amazing-feature</code>)</li> <li>Abra um Pull Request</li> </ol>"},{"location":"guides/development/#proximos-passos","title":"Pr\u00f3ximos Passos","text":"<ul> <li>Veja os M\u00f3dulos</li> <li>Entenda o Banco de Dados</li> <li>Explore a API Reference</li> </ul>"}]}